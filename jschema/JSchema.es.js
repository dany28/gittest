import"reflect-metadata";import{computed as e,watchEffect as t,shallowRef as n,markRaw as i,watch as r,isReactive as a,readonly as s,reactive as o,ref as l,nextTick as c,isRef as u,unref as h,isProxy as d,getCurrentInstance as p,onBeforeMount as f,onBeforeUnmount as m}from"vue";let $=e=>e;function g(e,t={}){"string"!=typeof e&&(e=e.toString());let n=!1,i=e;i.startsWith("() => ")?(i=i.substring(6),n=!0):i.startsWith("()=>")&&(i=i.substring(4),n=!0);const r=i.indexOf("{"),a=i.lastIndexOf("}");r>-1&&a>r&&(i=i.substring(r+1,a)),t.contextFromArg||(i=$(i)),i=i.replace(/\$parent\?\./,"$parent.");let s=i.split("\n").map((e=>e.trim())).filter((e=>e.length>0));if(t.removeDebugger&&(s=s.filter((e=>"debogger"!==e&&"debugger;"!==e))),1===s.length&&!t.skipRemoveReturn){let e=s[0];if(n)return e;if(0==e.search(/(return[\s\"\!\'\(\;]|return$)/)){for(e=e.substring(6).trimStart();e.endsWith(";");)e=e.substring(0,e.length-1);return"void 0"!==e&&"undefined"!==e?e:void 0}}return s}!function(){{const e="this.".replace(".","\\."),t=new RegExp(e+"\\$methods","gm"),n=new RegExp(e+"\\$root","gm"),i=new RegExp(e+"\\$parent","gm"),r=new RegExp(e+"\\$obj","gm"),a=new RegExp(e+"\\$external","gm"),s=new RegExp(e+"\\$value","gm"),o=new RegExp(e+"\\$event","gm");$=e=>e.replace(t,"$methods").replace(n,"$root").replace(i,"$parent").replace(r,"$obj").replace(a,"$external").replace(s,"$value").replace(o,"event")}}();const y={DATE0:/^(\d\d\d\d)-(\d\d)-(\d\d)([t|T|\s](00:00:00))?$/,TIME:/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,KOD_POCZTOWY:/^[0-9]{2}-[0-9]{3}$/,HOSTNAME:/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,NOT_URI_FRAGMENT:/\/|:/,URI:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,URL:/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,UUID:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,IPv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,IPv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,Z_ANCHOR:/[^\\]\\Z/,IBAN:/^([A-Z]{2}[ ]?)?[0-9][0-9]([ ]?[0-9]{4}){6}$/,EMAIL:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,GUID:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,GUID12:/^[0-9a-f]{12}$/i,NUMERIC:/^\d+$/,PHONE9:/^\d{9}$/,PHONE:/^\d{9}$/,DOWOD:/^[A-Z]{3}[ ]{0,1}\d{6}$/,EDOWOD:/^[A-Z]{4}[ ]{0,1}\d{5}$/,PASSPORT:/^[A-Z]{2}[ ]{0,1}\d{6}$/,NIP:/^(\d{10}|\d{3}-\d{3}-\d{2}-\d{2}|\d{3}-\d{2}-\d{2}-\d{3})$/,NIP_NUMBERSONLY:/^\d{10}$/,KW:/^[A-Z0-9]{1,4}\/\d{1,6}\/\d$/,PESEL:/^\d{11}$/,LCASE_UCASE_NUMBER_SPECIAL_8PLUS:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z0-9])(?=.{8,})$/},v=[0,31,28,31,30,31,30,31,31,30,31,30,31];function b(e){let t="";return e.requireLowercase&&(t+="(?=.*[a-z])"),e.requireUppercase&&(t+="(?=.*[A-Z])"),e.requireNumber&&(t+="(?=.*[0-9])"),e.requireSpecial&&(t+="(?=.*[^a-zA-Z0-9])"),t+=`(.{${e.minLength||0},${e.maxLength||""}})`,new RegExp(`^${t}$`)}function _(e){const t=e.match(y.DATE0);if(!t)return!1;const n=+t[1],i=+t[2],r=+t[3];return i>=1&&i<=12&&r>=1&&r<=(2===i&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(n)?29:v[i])}function w(e,t){const n=e.match(y.TIME);if(!n)return!1;const i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),s=n[5];return(i<=23&&r<=59&&a<=59||23===i&&59===r&&60===a)&&(!t||""!==s)}function x(e){return y.KOD_POCZTOWY.test(e)}const k=/t|\s/i;function F(e){const t=e.split(k);return 2===t.length&&_(t[0])&&w(t[1],!0)}const M=[6,5,7,2,3,4,5,6,7];const D={WL1A:"Aleksandrów Kujawski",SU1A:"Augustów",OL1Y:"Bartoszyce",PT1B:"Bełchatów",KA1B:"Będzin",LU1B:"Biała podlaska",RA2G:"Białobrzegi",KO1B:"Białogard",BI1B:"Białystok",BB1B:"Bielsko-Biała",BI1P:"Bielsk Podlaski",ZA1B:"Biłgoraj",OL1B:"Biskupiec",TR1O:"BochniaR1O",JG1B:"Bolesławiec",EL1B:"Braniewo",TO1B:"Brodnica",OP1B:"Brzeg",TR1B:"Brzesko",LD1B:"Brzeziny",KS1B:"Brzozów",KI1B:"Busko Zdrój",BY1B:"Bydgoszcz",KA1Y:"Bytom",SL1B:"Bytów",LU1C:"Chełm",TO1C:"Chełmno",PO1H:"Chodzież",SL1C:"Chojnice",KA1C:"Chorzów",SZ1C:"Choszczno",KR1C:"Chrzanów",PL1C:"Ciechanów",BB1C:"Cieszyn",PO2T:"Czarnków",KR1K:"Czernichów",CZ1C:"Częstochowa",SL1Z:"Człuchów",KA1D:"Dąbrowa Górnicza",TR1D:"Dąbrowa Tarnowska",RZ1D:"Dębica",KR2Y:"Dobczyce",KO1D:"Drawsko Pomorskie",EL1D:"Działdowo",SW1D:"Dzierżoniów",EL1E:"Elbląg",OL1E:"Ełk",SI1G:"Garwolin",GD1G:"Gdańsk",GD1Y:"Gdynia",OL1G:"Giżycko",GL1G:"Gliwice",LE1G:"Głogów",OP1G:"Głubczyce",PO1G:"Gniezno",SZ1O:"Goleniów",TO1G:"Golub-Dobrzyń",NS1G:"Gorlice",GW1G:"Gorzów Wielkopolski",PL1G:"Gostynin",PO1Y:"Gostyń",LM1G:"Grajewo",WA1G:"Grodzisk Mazowiecki",PO1S:"Grodzisk Wlkp.",RA1G:"Grójec",TO1U:"Grudziądz",SZ1G:"Gryfice",SZ1Y:"Gryfino",ZG2K:"Gubin",BI2P:"Hajnówka",ZA1H:"Hrubieszów",EL1I:"Iława",BY1I:"Inowrocław",ZA1J:"Janów Lubelski",KZ1J:"Jarocin",PR1J:"Jarosław",KS1J:"Jasło",GL1J:"Jastrzębie-Zdrój",LE1J:"Jawor",KA1J:"Jaworzno",JG1J:"Jelenia Góra",KI1J:"Jędrzejów",KZ1A:"Kalisz",JG1K:"Kamienna Góra",SZ1K:"Kamień Pomorski",GD1R:"Kartuzy",KA1K:"Katowice",KI1I:"Kazimierza wielka",OP1K:"Kędzierzyn-koźle",KZ1E:"Kępno",OL1K:"Kętrzyn",KR2E:"Kęty",KI1L:"Kielce",OP1U:"Kluczbork",CZ2C:"Kłobuck",SW1K:"Kłodzko",TB1K:"Kolbuszowa",KO1L:"Kołobrzeg",KN1K:"Koło",KN1N:"Konin",KI1K:"Końskie",KO1K:"Koszalin",PO1K:"Kościan",GD1E:"Kościerzyna",RA1K:"Kozienice",KR1P:"Kraków",ZA1K:"Krasnystaw",LU1K:"Kraśnik",KS1K:"Krosno",ZG1K:"Krosno Odrzańskie",KZ1R:"Krotoszyn",KR2K:"Krzeszowice",LD1K:"Kutno",GD1I:"Kwidzyn",WA1L:"Legionowo",LE1L:"Legnica",KS1E:"Lesko",PO1L:"Leszno",RZ1E:"Leżajsk",SL1L:"Lębork",OL1L:"Lidzbark Warmiński",NS1L:"Limanowa",WL1L:"Lipno",RA1L:"Lipsko",PR1L:"Lubaczów",JG1L:"Lubań",LU1A:"Lubartów",LE1U:"Lubin",CZ1L:"Lubliniec",LU1I:"Lublin",JG1S:"Lwówek Śląski",RZ1A:"Łańcut",SR1L:"Łask",LD1Y:"Łęczyca",SZ1L:"Łobez",LM1L:"Łomża",SI2S:"Łosice",LD1O:"Łowicz",LD1M:"Łódź",LU1U:"Łuków",GD1M:"Malbork",SL1M:"Miastko",KR1M:"Miechów",TB1M:"Mielec",PO2A:"Międzychód",GW1M:"Międzyrzecz",KA1M:"Mikołów",WR1M:"Milicz",SI1M:"Mińsk Mazowiecki",PL1M:"Mława",BY1M:"Mogilno",EL2O:"Morąg",OL1M:"Mrągowo",NS2L:"Mszana Dolna",NS1M:"Muszyna",KA1L:"Mysłowice",CZ1M:"Myszków",KR1Y:"Myślenice",SZ1M:"Myślibórz",BY1N:"Nakło nad Notecią",OL1N:"Nidzica",KR2I:"Niepołomice",TB1N:"Nisko",SW2K:"Nowa Ruda",ZG1N:"Nowa Sól",EL1N:"Nowe Miasto Lubawskie",GD2M:"Nowy Dwór Gdański",WA1N:"Nowy Dwór Mazowiecki",NS1S:"Nowy Sącz",NS1T:"Nowy Targ",PO1N:"Nowy Tomyśl",OP1N:"Nysa",PO1O:"Oborniki",OL1C:"Olecko",OP1L:"Olesno",WR1E:"Oleśnica",KR1O:"Olkusz",OL1O:"Olsztyn",WR1O:"Oława",KI1T:"Opatów",PT1O:"Opoczno",LU1O:"Opole Lubelskie",OP1O:"Opole",OS1O:"Ostrołęka",KI1O:"Ostrowiec Świętokrzyski",EL1O:"Ostróda",OS1M:"Ostrów Mazowiecka",KZ1W:"Ostrów Wielkopolski",KZ1O:"Ostrzeszów",KR1E:"Oświęcim",WA1O:"Otwock",LD1P:"Pabianice",SR2W:"Pajęczno",WA1I:"Piaseczno",PO1I:"Piła",KI1P:"Pińczów",RA2Z:"Pionki",PT1P:"Piotrków Trybunalski",OL1P:"Pisz",KZ1P:"Pleszew",PL1P:"Płock",PL1L:"Płońsk",SR2L:"Poddębice",SZ2S:"Police",PO1P:"Poznań (V)",PO2P:"Poznań (VI)",KR1H:"Proszowice",OP1P:"Prudnik",WA1P:"Pruszków",OS1P:"Przasnysz",PR1P:"Przemyśl",PR1R:"Przeworsk",RA1P:"Przysucha",KA1P:"Pszczyna",GD2W:"Puck",LU1P:"Puławy",OS1U:"Pułtusk",SZ2T:"Pyrzyce",GL1R:"Racibórz",RA1R:"Radom",PT1R:"Radomsko",WL1R:"Radziejów",LU1R:"Radzyń Podlaski",LD1R:"Rawa Mazowiecka",PO1R:"Rawicz",RZ1R:"Ropczyce",GL1S:"Ruda Śląska",GL1Y:"Rybnik",LU1Y:"Ryki",WL1Y:"Rypin",RZ1Z:"Rzeszów",KI1S:"Sandomierz",KS1S:"Sanok",SU1N:"Sejny",BY2T:"Sępólno Krajeńskie",SI1S:"Siedlce",KA1I:"Siemianowice Śląskie",BI3P:"Siemiatycze",PR2R:"Sieniawa",SR1S:"Sieradz",PL1E:"Sierpc",KR2P:"Skała",KI1R:"Skarżysko-Kamienna",KR3I:"Skawina",LD1H:"Skierniewice",KO1E:"Sławno",KR1S:"Słomniki",GW1S:"Słubice",KN1S:"Słupca",SL1S:"Słupsk",PL1O:"Sochaczew",SI1P:"Sokołów Podlaski",BI1S:"Sokółka",GD1S:"Sopot",KA1S:"Sosnowiec",TB1S:"Stalowa Wola",KI1H:"Starachowice",SZ1T:"Stargard Szczeciński",GD1A:"Starogard Gdański",KI1A:"Staszów",GW1K:"Strzelce Krajeńskie",OP1S:"Strzelce Opolskie",WR1T:"Strzelin",RZ1S:"Strzyżów",KR1B:"Sucha Beskidzka",ZG2S:"Sulechów",GW1U:"Sulęcin",SU1S:"Suwałki",PO1A:"Szamotuły",KO1I:"Szczecinek",SZ1S:"Szczecin",OL1S:"Szczytno",GD2I:"Sztum",BY1U:"Szubin",RA1S:"Szydłowiec",PO1M:"Śrem",WR1S:"Środa Śląska",PO1D:"Środa Wlkp.",SW1S:"Świdnica",KO2B:"Świdwin",ZG1S:"Świebodzin",BY1S:"Świecie",SZ1W:"Świnoujście",TB1T:"Tarnobrzeg",GL1T:"Tarnowskie Góry",TR1T:"Tarnów",GD1T:"Tczew",ZA1T:"Tomaszów Lubelski",PT1T:"Tomaszów Mazowiecki",TO1T:"Toruń",PO1T:"Trzcianka",WR1W:"Trzebnica",BY1T:"Tuchola",TR2T:"Tuchów",KN1T:"Turek",KA1T:"Tychy",RZ2Z:"Tyczyn",KS2E:"Ustrzyki Dolne",KR1W:"Wadowice",SW1W:"Wałbrzych",KO1W:"Wałcz",WA3M:"Warszawa (IX)",WA1M:"Warszawa (VI)",WA2M:"Warszawa (VII)",WA4M:"Warszawa (X)",WA5M:"Warszawa (XIII)",WA6M:"Warszawa (XV)",TO1W:"Wąbrzeźno",PO1B:"Wągrowiec",GD1W:"Wejherowo",OL2G:"Węgorzewo",SI1W:"Węgrów",KR1I:"Wieliczka",SR1W:"Wieluń",WL1W:"Włocławek",LU1W:"Włodawa",KI1W:"Włoszczowa",GL1W:"Wodzisław Śląski",PO1E:"Wolsztyn",WA1W:"Wołomin",WR1L:"Wołów",WR1K:"Wrocław",PO1F:"Września",ZG1W:"Wschowa",PO2H:"Wyrzysk",LM1W:"Wysokie Mazowieckie",OS1W:"Wyszków",GL1Z:"Zabrze",NS1Z:"Zakopane",LM1Z:"Zambrów",ZA1Z:"Zamość",CZ1Z:"Zawiercie",SW1Z:"Ząbkowice Śląskie",SR1Z:"Zduńska Wola",LD1G:"Zgierz",JG1Z:"Zgorzelec",ZG1E:"Zielona Góra",LE1Z:"Złotoryja",PO1Z:"Złotów",RA1Z:"Zwoleń",ZG1G:"Żagań",ZG1R:"Żary",BY1Z:"Żnin",GL1X:"Żory",PL2M:"Żuromin",PL1Z:"Żyrardów",BB1Z:"Żywiec"},S={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,X:10,A:11,B:12,C:13,D:14,E:15,F:16,G:17,H:18,I:19,J:20,K:21,L:22,M:23,N:24,O:25,P:26,R:27,S:28,T:29,U:30,W:31,Y:32,Z:33};const O=[9,7,3,1,9,7,3,1,9,7];const z=[8,9,2,3,4,5,6,7];function C(e){if(9===e.length){let t=0;for(let n=0;n<8;n++){const i=Number(e[n]);isNaN(i)||(t+=i*z[n])}let n=t%11;return 10===n&&(n=0),n===Number(e[8])}return!1}const R=[2,4,8,5,0,9,7,3,6,1,2,4,8];function P(e){if(14===e.length){if(e.endsWith("00000"))return C(e.substring(0,9));let t=0;for(let n=0;n<13;n++){const i=Number(e[n]);isNaN(i)||(t+=i*R[n])}let n=t%11;return 10===n&&(n=0),n===Number(e[13])}return!1}const j=[1,10,3,30,9,90,27,76,81,34,49,5,50,15,53,45,62,38,89,17,73,51,25,56,75,71,31,19,93,57];function I(e){if("00000000000000000000000000"===e)return!0;if(26===(e=e.replace(/[^0-9]+/g,"")).length){e=(e+="2521").substring(2)+e.substring(0,2);let t=0;for(let n=0;n<30;n++)t+=Number(e[29-n])*j[n];return t%97==1}return!1}const L={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35};function A(e){if(null==(e=e.replace(/[\s-]/g,""))||9!==e.length)return!1;e=e.toUpperCase();for(let t=0;t<4;t++)if(L[e[t]]<10)return!1;for(let t=4;t<9;t++){const n=L[e[t]];if(void 0===n||n<0||n>9)return!1}let t=7*L[e[0]]+3*L[e[1]]+1*L[e[2]]+7*L[e[3]]+3*L[e[5]]+1*L[e[6]]+7*L[e[7]]+3*L[e[8]];return t%=10,t===L[e[4]]}function N(e){return y.GUID.test(e)}function E(e){return y.GUID12.test(e)}const T=[7,3,9,1,7,3,1,7,3];const K={date:_,time:w,date_time:F,"date-time":F,nip:function(e){if(10===(e=e.replace(/[\s-]/g,"")).length){let t=0;for(let n=0;n<9;n++){const i=Number(e[n]);isNaN(i)||(t+=i*M[n])}return t%11===Number(e[9])}return!1},regon:function(e){return 9===e.length?C(e):P(e)},regon9:C,regon14:P,kw:function(e){if(null==e)return!1;if(15!==e.length)return!1;if("/"!==(e=e.toUpperCase())[4]||"/"!==e[13])return!1;if(void 0===D[e.substring(0,4)])return!1;if(isNaN(+e.substring(5,13)))return!1;const t=1*(S[e[0]]||0)+3*(S[e[1]]||0)+7*(S[e[2]]||0)+1*(S[e[3]]||0)+3*(S[e[5]]||0)+7*(S[e[6]]||0)+1*(S[e[7]]||0)+3*(S[e[8]]||0)+7*(S[e[9]]||0)+1*(S[e[10]]||0)+3*(S[e[11]]||0)+7*(S[e[12]]||0);return+e[14]==t%10},dowod:function(e){if(null==(e=e.replace(/[\s-]/g,""))||9!==e.length)return!1;if(e=e.toUpperCase(),L[e[3]]>=10)return A(e);for(let t=0;t<3;t++)if(L[e[t]]<10)return!1;for(let t=3;t<9;t++){const n=L[e[t]];if(void 0===n||n<0||n>9)return!1}let t=7*L[e[0]]+3*L[e[1]]+1*L[e[2]]+7*L[e[4]]+3*L[e[5]]+1*L[e[6]]+7*L[e[7]]+3*L[e[8]];return t%=10,t===L[e[3]]},edowod:A,passport:function(e){if(9!==e.length)return!1;let t=0;for(let n=0;n<e.length;n++){const i="<"===e[n]?0:L[e[n]];-1!==i&&(t+=i*T[n])}return t%=10,0===t},guid:function(e){return E(e)||N(e)},guidlong:N,guidshort:E,numeric:function(e){return y.NUMERIC.test(e)},phone9:function(e){return y.PHONE9.test(e)},phone:function(e){return y.PHONE.test(e)},email:function(e){return y.EMAIL.test(e)},iban:I,pesel:function(e){if(11===(e=e.replace(/[\s-]/g,"")).length){if(function(e){if("string"!=typeof e)return!1;for(let t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0}(e))return!1;let t=0;for(let n=0;n<10;n++){const i=Number(e[n]);isNaN(i)||(t+=i*O[n])}return t%10===Number(e[10])}return!1},kod:x,kodpocztowy:x,nrb:I,uri:function(e){return y.NOT_URI_FRAGMENT.test(e)&&y.URI.test(e)},url:function(e){return y.URL.test(e)},uuid:function(e){return y.UUID.test(e)},regex:function(e){if(y.Z_ANCHOR.test(e))return!1;try{return null!==new RegExp(e)}catch(e){return!1}}};function V(e,t){return W(e)(t)}function W(e){return K[e]||(()=>!0)}function G(e,t){return V(e,t)}function U(e){return 10===e.length?new Date(1e3*+e[0]+100*+e[1]+10*+e[2]+ +e[3],10*+e[5]+ +e[6]-1,10*+e[8]+ +e[9]):new Date(1e3*+e[0]+100*+e[1]+10*+e[2]+ +e[3],10*+e[5]+ +e[6]-1,10*+e[8]+ +e[9],10*+e[11]+ +e[12],10*+e[14]+ +e[15],10*+e[17]+ +e[18])}function B(e,t="short"){return new Intl.DateTimeFormat(e,{timeStyle:t}).format(new Date(2e3,0,2,15,4,5)).replace("15","HH").replace("03","hh").replace("3","h").replace("04","mm").replace("4","m").replace("05","ss").replace("5","s").replace("PM","A").replace("pm","a")}function Z(e){return+(e[8]+e[9])+"."+e[5]+e[6]+"."+e[0]+e[1]+e[2]+e[3]}function q(e){return+(e[5]+e[6])+"/"+ +(e[8]+e[9])+"/"+e[0]+e[1]+e[2]+e[3]}function Y(e){switch(e){case"pl":return Z;case"en":return q;default:{const t=new Intl.DateTimeFormat(e);return e=>t.format(new Date(e))}}}function H(e){const t=new Intl.DateTimeFormat(e).formatToParts(new Date(2e3,0,2,3,4,5)),n={format:"",separator:""};for(let e=0;e<t.length;e++){const i=t[e];if("literal"==i.type)n.separator=i.value,n.format+=i.value;else{switch(i.value){case"2000":i.value="YYYY";break;case"01":i.value="MM";break;case"1":i.value="M";break;case"02":i.value="DD";break;case"2":i.value="D"}n.format+=i.value}}let i="try {\nvar strpos = 0;var l=sdate.length;\n";for(let e=0;e<t.length;e++){const n=t[e];switch(n.type){case"day":"DD"==n.value?(i+="if (l<strpos+2) return '';\n",i+="var dd = sdate[strpos++]+sdate[strpos++];\n"):"D"==n.value&&(e<t.length-1&&"literal"==t[e+1].type?(1==t[e+1].value.length?i+="if (sdate[strpos+1] === '"+t[e+1].value+"') {\n":i+="if (sdate.substring(strpos+1,strpos+"+(t[e+1].value.length+1)+") === '"+t[e+1].value+"') {\n",i+="  if (l<strpos+1) return '';\n",i+="  var dd = '0'+sdate[strpos++];\n",i+="} else {\n",i+="  if (l<strpos+2) return '';\n",i+="  var dd = sdate[strpos++]+sdate[strpos++];\n",i+="}\n"):(i+="if (l<strpos+1) return '';\n",i+="var dd = sdate.substring(strpos);\n"));break;case"month":"MM"==n.value?(i+="if (l<strpos+2) return '';\n",i+="var mm = sdate[strpos++]+sdate[strpos++];\n"):"M"==n.value&&(e<t.length-1&&"literal"==t[e+1].type?(i+="if (sdate[strpos+1] === '"+t[e+1].value+"') {\n",i+="  if (l<strpos+1) return '';\n",i+="  var mm = '0'+sdate[strpos++];\n",i+="} else {\n",i+="  if (l<strpos+2) return '';\n",i+="  var mm = sdate[strpos++]+sdate[strpos++];\n",i+="}\n"):(i+="if (l<strpos+1) return '';\n",i+="var mm = sdate.substring(strpos);\n"));break;case"year":"YYYY"==n.value?(i+="if (l<strpos+4) return '';\n",i+="var yyyy = sdate[strpos++]+sdate[strpos++]+sdate[strpos++]+sdate[strpos++];\n"):"YY"==n.value&&(i+="if (l<strpos+2) return '';\n",i+="var yyyy = '20'+sdate[strpos++]+sdate[strpos++];\n");break;case"literal":1==n.value.length?i+="strpos++;\n":i+="strpos+="+n.value.length+"\n"}}return i+="return yyyy+'-'+mm+'-'+dd;\n",i+="} catch { return ''; }\n",new Function("sdate",i)}function J(e,t="long"){const n=new Intl.DateTimeFormat(e,{month:t}),i=[];for(let e=0;e<12;e++){const t=new Date(Date.UTC(2e3,e,1,0,0,0));i.push(n.format(t))}return i}function X(e,t="long"){const n=new Intl.DateTimeFormat(e,{weekday:t}),i=[];for(let e=1;e<=7;e++){const t=new Date(Date.UTC(2024,0,e,0,0,0));i.push(n.format(t))}return i}function Q(e,t="decimal"){var n;return null===(n=Intl.NumberFormat(e).formatToParts(10000.1).find((e=>e.type===t)))||void 0===n?void 0:n.value}const ee={};function te(e){var t,n;let i=ee[e];return i||(i={name:e,weekdays:X(e),weekdaysShort:X(e,"short"),weekdaysMin:X(e,"narrow"),weekStart:1,yearStart:4,months:J(e),monthsShort:J(e,"short"),ordinal:e=>e.toString(),decimalSeparator:null!==(t=Q(e,"decimal"))&&void 0!==t?t:".",groupSeparator:null!==(n=Q(e,"group"))&&void 0!==n?n:" ",shortDateFormatter:Y(e),longDateFormatter:Intl.DateTimeFormat(e,{dateStyle:"long"}).format,shortDateReformatter:H(e),formatSpaceNumber:Intl.NumberFormat(e,{maximumFractionDigits:2}).format,formats:{LTS:B(e,"medium"),LT:B(e,"short"),L:(r=e,new Intl.DateTimeFormat(r).format(new Date(2e3,0,2,3,4,5)).replace("2000","YYYY").replace("01","MM").replace("1","M").replace("02","DD").replace("2","D"))},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},meridiem:()=>""},ee[e]=i,i);var r}const ne={current:te("pl"),setLang(e){this.current=te(e)}};function ie(e,t=2){if(2===t)return e<10?"0"+e:""+e;let n=""+e;for(;n.length<t;)n="0"+n;return n}function re(e,t,n){const i=n||(null==this?void 0:this.lang)||ne.current;if("string"==typeof e&&(e=new Date(e)),!isNaN(e.getTime())){let n=ae[t||"yyyy-MM-dd HH:mm:ss"];return void 0===n&&(n=function(e){const t=[],n=e;function i(n,i){let r=e.indexOf(n);for(;r>-1;){t[r]=i;let a="";for(let e=0;e<n.length;e++)a+="^";r=(e=e.substring(0,r)+a+e.substring(r+n.length)).indexOf(n)}}for(const e in ae)i(e,ae[e]);const r=[];for(let n=0;n<e.length;n++)if(t[n]){let e=t[n].toString();const i=e.indexOf("=>");if(i>-1){const t=e.substring(0,i).trim().replace("(","").replace(")","").split(",");e=e.substring(i+2).trim();const n=t[0].trim();"dt7"!==n&&(e=e.replaceAll(n+".","dt7."));let r=t[1];r&&(r=r.trim(),"lang7"!==r&&(e=e.replaceAll(r+".","lang7.")))}r.push(e)}else"^"!==e[n]&&r.push('"'+e[n]+'"');const a=new Function("dt7,lang7","return "+r.join("+"));return ae[n]=a,a}(t||"yyyy-MM-dd HH:mm:ss")),n(e,i)}return""}const ae={"d.MM.yyyy":e=>e.getDate()+"."+(e.getMonth()+1).toString().padStart(2,"0")+"."+e.getFullYear(),"dd.MM.yyyy":e=>e.getDate().toString().padStart(2,"0")+"."+(e.getMonth()+1).toString().padStart(2,"0")+"."+e.getFullYear(),"yyyy-MM-dd":function(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")},"MMMM yyyy":(e,t)=>`${t.months[e.getMonth()]} ${e.getFullYear()}`,"MMM yyyy":(e,t)=>`${t.monthsShort[e.getMonth()]} ${e.getFullYear()}`,"HH:mm:ss":e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`,"dd.MM.yyyy HH:mm:ss":(e,t)=>ae["dd.MM.yyyy"](e,t)+" "+ae["HH:mm:ss"](e,t),"yyyy-MM-dd HH:mm:ss":(e,t)=>ae["yyyy-MM-dd"](e,t)+" "+ae["HH:mm:ss"](e,t),dddd:(e,t)=>t.weekdays[e.getDay()],ddd:(e,t)=>t.weekdaysShort[e.getDay()],dd:e=>e.getDate().toString().padStart(2,"0"),d:e=>e.getDate().toString(),DDDD:(e,t)=>t.weekdays[e.getDay()],DDD:(e,t)=>t.weekdaysShort[e.getDay()],DD:e=>e.getDate().toString().padStart(2,"0"),D:e=>e.getDate().toString(),MMMM:(e,t)=>t.months[e.getMonth()],MMM:(e,t)=>t.monthsShort[e.getMonth()],MM:e=>(e.getMonth()+1).toString().padStart(2,"0"),M:e=>(e.getMonth()+1).toString(),YYYY:e=>e.getFullYear().toString(),YY:e=>(e.getFullYear()%100).toString().padStart(2,"0"),yyyy:e=>e.getFullYear().toString(),yy:e=>(e.getFullYear()%100).toString().padStart(2,"0"),HH:e=>e.getHours().toString().padStart(2,"0"),H:e=>e.getHours().toString(),mm:e=>e.getMinutes().toString().padStart(2,"0"),m:e=>e.getMinutes().toString(),ss:e=>e.getSeconds().toString().padStart(2,"0"),s:e=>e.getSeconds().toString(),long:(e,t)=>t.longDateFormatter(e)};function se(e,t,n){const i="string"==typeof e?U(e):e,r=new Date(i);switch(t){case"y":case"yy":case"yyyy":case"year":r.setFullYear(i.getFullYear()+n);break;case"M":case"MM":case"month":r.setMonth(i.getMonth()+n);break;case"d":case"dd":case"day":r.setDate(i.getDate()+n);break;case"h":case"hh":case"hour":r.setHours(i.getHours()+n);break;case"m":case"mm":case"minute":r.setMinutes(i.getMinutes()+n);break;case"s":case"ss":case"second":r.setSeconds(i.getSeconds()+n)}return"string"==typeof e&&10===e.length?re(r).replace(" 00:00:00",""):re(r)}class oe{static diff(e,t){try{const n="string"==typeof e?U(e):e,i="string"==typeof t?U(t):t,r=n.getTimezoneOffset()-i.getTimezoneOffset();return new oe(n.getTime()-i.getTime()-60*r*1e3,n,i)}catch(e){return new oe(0)}}constructor(e,t,n){this.ms=e,this.lateDate=t,this.earlyDate=n}get totalMiliseconds(){return this.ms}get miliseconds(){return this.ms%1e3}get totalSeconds(){return this.ms/1e3}get seconds(){return Math.trunc(this.totalMinutes%1*60)}get totalMinutes(){return this.ms/6e4}get minutes(){return Math.trunc(this.totalHours%1*60)}get totalHours(){return this.ms/36e5}get hours(){return Math.trunc(this.totalDays%1*24)}get totalDays(){return this.ms/864e5}get days(){return Math.trunc(this.totalDays)}get months(){if(this.earlyDate&&this.lateDate){let e=12*(this.lateDate.getFullYear()-this.earlyDate.getFullYear());return e+=this.lateDate.getMonth(),e-=this.earlyDate.getMonth(),e>0?this.lateDate.getDate()<this.earlyDate.getDate()&&e--:e<0&&this.lateDate.getDate()>this.earlyDate.getDate()&&e++,e}return Math.trunc(this.days/30)}get years(){return Math.trunc(this.months/12)}toString(){return ie(Math.trunc(this.totalHours),2)+":"+ie(this.minutes,2)+":"+ie(this.seconds,2)}}function le(e,t){return oe.diff(e,t)}function ce(e,t){switch(t){case"y":case"yy":case"yyyy":case"year":return"string"==typeof e?ue(e,0,4):e.getFullYear();case"M":case"MM":case"month":return"string"==typeof e?ue(e,5,2):e.getMonth()+1;case"d":case"dd":case"day":return"string"==typeof e?ue(e,8,2):e.getDate();case"h":case"hh":case"hour":return"string"==typeof e?ue(e,11,2):e.getHours();case"m":case"mm":case"minute":return"string"==typeof e?ue(e,14,2):e.getMinutes();case"s":case"ss":case"second":return"string"==typeof e?ue(e,17,2):e.getSeconds();default:return 0}}function ue(e,t,n){return t<e.length?+e.substring(t,n+t):0}function he(e){return JSON.parse(JSON.stringify(e))}const de=[];function pe(e){const{d:t,m:n,y:i}="string"!=typeof e?{d:e.getDate(),m:e.getMonth()+1,y:e.getFullYear()}:{d:ce(e,"d"),m:ce(e,"M"),y:ce(e,"y")};if(1==n&&1==t)return"Nowy Rok";if(1==n&&6==t)return"Trzech Króli";if(5==n&&1==t)return"Święto Pracy";if(5==n&&3==t)return"Święto Konstytucji 3 Maja";if(8==n&&15==t)return"Wniebowzięcie Najświętszej Maryi Panny";if(11==n&&1==t)return"Wszystkich Świętych";if(11==n&&11==t)return"Święto Niepodległości";if(12==n&&25==t)return"Boże Narodzenie";if(12==n&&26==t)return"Boże Narodzenie";if(n>=3&&n<=6){let e=de[i];if(null==e){const t=i%19;let n=(19*t+24)%30;const r=(2*(i%4)+4*(i%7)+6*n+5)%7;29==n&&6==r&&(n-=7),28==n&&6==r&&t>10&&(n-=7);const a=new Date(i,2,22+n+r),s=new Date(a.valueOf());s.setDate(a.getDate()+1);const o=new Date(a.valueOf());o.setDate(a.getDate()+49);const l=new Date(a.valueOf());l.setDate(a.getDate()+60),de[i]=e={wielkanoc:[a.getFullYear(),a.getMonth()+1,a.getDate()],poniedzialek:[s.getFullYear(),s.getMonth()+1,s.getDate()],zieloneswiatki:[o.getFullYear(),o.getMonth()+1,o.getDate()],bozecialo:[l.getFullYear(),l.getMonth()+1,l.getDate()]}}if(e.wielkanoc[1]==n&&e.wielkanoc[2]==t)return"Wielkanoc";if(e.poniedzialek[1]==n&&e.poniedzialek[2]==t)return"Poniedziałek Wielkanocny";if(e.zieloneswiatki[1]==n&&e.zieloneswiatki[2]==t)return"Zielone Świątki";if(e.bozecialo[1]==n&&e.bozecialo[2]==t)return"Boże Ciało"}return""}function fe(e){const t=("N"==e?"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx":"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx").replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));switch(e){case"B":return"{"+t+"}";case"P":return"("+t+")"}return t}const me="0123456789abcdef".split("");function $e(){let e="";for(let t=0;t<12;t++)e+=me[16*Math.random()|0];return e}function ge(e){const t=e.toLocaleLowerCase();let n="",i=!0;for(let e=0;e<t.length;e++){const r=t[e];" "==r||"\t"==r||"\r"==r||"\n"==r||"-"==r||","==r||"."==r||"_"==r?(n+=r,i=!0):i?(n+=r.toLocaleUpperCase(),i=!1):n+=r}return n}const ye=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];function ve(e,t=2){return void 0===e||e%1==0?e:Math.round(e*ye[t]+1e-13)/ye[t]}function be(e,t=8,n){var i;if(null===e)return"";if(e%1==0)return e.toString();const r=(null!==(i=null!=n?n:null==this?void 0:this.lang)&&void 0!==i?i:ne.current).decimalSeparator;return ve(e,t).toString().replace(".",r)}const _e=["",".0",".00",".000",".0000",".00000",".000000",".0000000",".00000000"];function we(e,t,n=2,i){var r;if(null===e)return"";const a=(null!==(r=null!=i?i:null==this?void 0:this.lang)&&void 0!==r?r:ne.current).decimalSeparator;if(e%1==0)return t?e.toFixed(0)+("."==a?_e[n]:_e[n].replace(".",a)):e.toFixed(0);let s=ve(e,n).toFixed(n);return t||(s=s.replace(_e[n],"")),"."!=a?s.replace(".",a):s}function xe(e,t,n=2,i){let r;const a=i||(null==this?void 0:this.lang)||ne.current;if("string"!=typeof e)return a.formatSpaceNumber(e);r=e;const s=a.decimalSeparator,o=a.groupSeparator,l=r.split(s);let c="";const u=l[0].length-1;for(let e=0;e<=u;e++)c=l[0][u-e]+c,e<u&&(2===e||5===e||8===e||11===e)&&(c=o+c);return l.length>1?c+s+l[1]:c}const ke="dd.MM.yyyy",Fe=ae[ke];function Me(e,t,n){const i=n||(null==this?void 0:this.lang)||ne.current;return"string"==typeof e?function(e,t,n){const i=n||(null==this?void 0:this.lang)||ne.current;if(!t)return i.shortDateFormatter(e);if(e&&e.length>=10)switch(t){case"dd.MM.yyyy":return`${e.substring(8,10)}.${e.substring(5,7)}.${e.substring(0,4)}`;case"yyyy-MM-dd":return e.substring(0,10);default:return re(new Date(e),t,i)}return""}(e,t,i):(t||(t=i.formats.L),t===ke?Fe(e,i):re(e,t,i))}const De=ae["yyyy-MM-dd"];function Se(e){return isNaN(e.getTime())?"":De(e,null)}function Oe(e,t,n){var i;let r=0,a=0;"string"==typeof e?(r=ce(e,"M"),a=ce(e,"y")):(r=e.getMonth()+1,a=e.getFullYear());let s=0,o=0;"string"==typeof t?(s=ce(t,"M"),o=ce(t,"y")):(s=t.getMonth()+1,o=t.getFullYear());const l=null!==(i=null==this?void 0:this.lang)&&void 0!==i?i:ne.current,c=[];if(r&&a&&s&&o){r--,s--;let e,t=" "+a;switch(n){case"MMMM yyyy":default:e=e=>l.months[e]+t;break;case"MMM yyyy":e=e=>l.monthsShort[e]+t;break;case"MM yyyy":e=e=>ie(e+1)+t;break;case"M yyyy":e=e=>e+1+t;break;case"MMMM":e=e=>l.months[e];break;case"MMM":e=e=>l.monthsShort[e];break;case"MM":e=e=>ie(e+1);break;case"M":e=e=>(e+1).toString()}for(;r<=s&&a===o||a<o;)c.push(e(r,a)),r++,r>11&&(r=0,a++,t=" "+a)}return c}function ze(e,t){let n=ce(e,"y");const i=ce(t,"y"),r=[];if(n&&i)for(;n<=i;)r.push(n),n++;return r}function Ce(e){if("string"!=typeof e||e.length<6)return"";let t=10*+e[2]+ +e[3];const n=10*+e[4]+ +e[5];if(t&&n){let i=10*+e[0]+ +e[1]+1900;if(t>80)i-=100,t-=80;else for(;t>20;)i+=100,t-=20;return i+"-"+ie(t)+"-"+ie(n)}return""}function Re(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;for(const n of t)if(!e.includes(n))return!1;return!0}function Pe(e,t){if(0===t)return 0;{const n=100*e/t;return n<0?0:ve(n,8)}}function je(){return re(new Date)}function Ie(e,t){return null===e?t:e}function Le(){return Se(new Date)}function Ae(e,t){if(t){if("string"==typeof t){let n=0;for(const i of e)n+=i[t];return n}return e.reduce(((e,n,i)=>{const r=t(n,i);return void 0!==r?e+r:e}),0)}return e.reduce(((e,t)=>e+t),0)}const Ne=["zero","jeden","dwa","trzy","cztery","pięć","sześć","siedem","osiem","dziewięć","dziesięć","jedenaście","dwanaście","trzynaście","czternaście","piętnaście","szesnaście","siedemnaście","osiemnaście","dziewiętnaście"],Ee=["dwadzieścia","trzydzieści","czterdzieści","pięćdziesiąt","sześćdziesiąt","siedemdziesiąt","osiemdziesiąt","dziewięćdziesiąt"],Te=["","sto","dwieście","trzysta","czterysta","pięćset","sześćset","siedemset","osiemset","dziewięćset"],Ke=[["tysiąc","tysiące","tysięcy"],["milion","miliony","milionów"],["miliard","miliardy","miliardów"],["bilion","biliony","bilionów"],["biliard","biliardy","biliardów"],["trylion","tryliony","trylionów"],["tryliard","tryliardy","tryliardów"],["kwadrylion","kwadryliony","kwadrylionów"],["kwadryliard","kwadryliardy","kwadryliardów"]];function Ve(e){if(0===e)return null;let t="";const n=Math.floor(e/100);if(n>0&&(t+=Te[n],e-=100*n),e>0)if(t.length>0&&(t+=" "),e<20)t+=Ne[e];else{t+=Ee[Math.floor(e/10)-2];const n=e%10;n>0&&(t+=" ",t+=Ne[n])}return t}function We(e,t,n){let i=0;const r=Math.pow(1e3,n+1);let a=t;if(r<=t){const s=(t=We(e,t,n+1))/r;if(i=Math.floor(s),e.text.length>0&&(e.text+=" "),a=t-i*r,i>0&&(i>1||e.text.length>0||0===a)&&(e.text+=Ve(i),e.text+=" "),i>0){const t=Ke[n];if(void 0!==t){const n=function(e){const t=e%10;if(e/10>=1&&1===t)return 2;const n=e%100;return n>=10&&(n<=20||0===t)||t>4?2:1===t?0:1}(i);e.text+=t[n]}}}return a}function Ge(e){if(0===e)return Ne[0];const t={text:""},n=We(t,e,0);return n>0&&(t.text.length>0&&(t.text+=" "),t.text+=Ve(n)),t.text}function Ue(e){return e<0&&(e*=-1),Ge(Math.floor(e))}const Be=[],Ze=[],qe=[["","I","II","III","IV","V","VI","VII","VIII","IX"],["","X","XX","XXX","XL","L","LX","LXX","LXXX","XC"],["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM"],["","M","MM","MMM","","","","","",""]],Ye=[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","","","","","",""]];function He(e,t,n){if(e>3999)return"";if(void 0!==n[e])return n[e];let i=0,r=e,a="";for(;r>0;){const e=r%10;if(a=t[i][e]+a,e===r)break;r=Math.floor(r/10),i++}return n[e]=a}function Je(e){return He(e,qe,Be)}function Xe(e){return He(e,Ye,Ze)}function Qe(e,t="",n=!1){e<0&&(e*=-1);let i="";const r=Math.floor(e),a=ve(100*(e-r),0);return t||(t=function(e){if(1===e)return"złoty";const t=e%100;if(t>=5&&t<=20)return"złotych";switch(t%10){case 2:case 3:case 4:return"złote"}return"złotych"}(r)),i=Ue(r)+" "+t,(0!==a||n)&&(i+=" "+ie(a,2)+"/100"),i}const et=[],tt=[];function nt(e,t,n){if(void 0!==n[e])return n[e];let i="";if(e>24){let n=e;for(i="";n>0;){const e=n%24;if(i=String.fromCharCode(e+t)+i,n===e)break;n=Math.floor(n/24)}}else i=e?String.fromCharCode(e+t):"";return n[e]=i}function it(e){return nt(e,96,et)}function rt(e){return nt(e,64,tt)}function at(e,t="1."){switch(t){case"1":return e.toString();case"1.":return e+".";case"1)":return e+")";case"(1)":return"("+e+")";case"§":case"§ 1":return"§ "+e;case"§ 1.":return"§ "+e+".";case"a":return it(e);case"a)":return it(e)+")";case"a.":return it(e)+".";case"(a)":return"("+it(e)+")";case"A":return rt(e);case"A)":return rt(e)+")";case"A.":return rt(e)+".";case"(A)":return"("+rt(e)+")";case"i":return Xe(e);case"i.":return Xe(e)+".";case"i)":return Xe(e)+")";case"(i)":return"("+Xe(e)+")";case"I":return Je(e);case"I)":return Je(e)+")";case"I.":return Je(e)+".";case"(I)":return"("+Je(e)+")";case"abc":return Ue(e);case"abc)":return Ue(e)+")";case"abc.":return Ue(e)+".";default:return"*"}}const st=["1.","a)","i."];let ot;ot=void 0!==String.prototype.replaceAll?(e,t,n)=>e.replaceAll(t,n):(e,t,n)=>e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"g"),n);const lt=(e,t)=>e.Guid===t.Guid,ct=e=>Object.assign({},e);function ut(e,t,n=lt,i=ct){if(!e||!t)return!1;if(0===t.length)return e.length>0&&(e.splice(0,e.length),!0);if(0===e.length){for(const n of t)e.push(i(n));return!0}const r=e.length;if(r===t.length&&t.every((t=>e.some((e=>n(e,t))))))return!1;let a=!1;for(const r of t)e.some((e=>n(e,r)))||(e.push(i(r)),a=!0);for(let i=r-1;i>=0;i--)t.some((t=>n(e[i],t)))||(e.splice(i,1),a=!0);return a}var ht=Object.freeze({__proto__:null,avg:function(e,t){if(t){if("string"==typeof t)return 0===e.length?0:Ae(e,t)/e.length;{let n=0;const i=e.reduce(((e,i,r)=>{const a=t(i,r);return void 0!==a?(n++,e+a):e}),0);return 0==n?0:i/n}}return 0===e.length?0:Ae(e,t)/e.length},bigRomanValue:Je,capitalize:ge,check:G,dateAdd:se,dateDiff:le,dateFromPesel:Ce,dateHoliday:pe,dateParse:U,datePart:ce,dateSet:function(e,t,n){const i="string"==typeof e?U(e):e,r=new Date(i);switch(t){case"y":case"yy":case"yyyy":case"year":r.setFullYear(n);break;case"M":case"MM":case"month":r.setMonth(n-1);break;case"d":case"dd":case"day":r.setDate(n);break;case"h":case"hh":case"hour":r.setHours(n);break;case"m":case"mm":case"minute":r.setMinutes(n);break;case"s":case"ss":case"second":r.setSeconds(n)}return"string"==typeof e&&10===e.length?re(r).replace(" 00:00:00",""):re(r)},deepCopy:he,defaultLang:ne,displayDate:Me,distinct:function(e,t){const n=[],i={};if(t){const r="string"==typeof t;for(let a=0;a<e.length;a++){const s=r?e[a][t]:t(e[a],a);void 0!==s&&void 0===i[s]&&(n.push(s),i[s]=a)}}else for(let t=0;t<e.length;t++)void 0===i[e[t]]&&(n.push(e[t]),i[e[t]]=t);return n},distinctItem:function(e,t){const n=[],i={};if(t){const r="string"==typeof t;for(let a=0;a<e.length;a++){const s=r?e[a][t]:t(e[a],a);void 0!==s&&void 0===i[s]&&(n.push(e[a]),i[s]=a)}}else for(let t=0;t<e.length;t++)void 0===i[e[t]]&&(n.push(e[t]),i[e[t]]=t);return n},fdate:Se,fdatetime:re,fmoney:we,fmoneySpace:xe,fnumber:be,fromDisplayDate:function(e,t,n){if("dd.MM.yyyy"===t){if(e.length>=10&&"."==e[2]&&"."==e[5])return`${e.substring(6,10)}-${e.substring(3,5)}-${e.substring(0,2)}`}else if(!t){return(n||(null==this?void 0:this.lang)||ne.current).shortDateReformatter(e)}return""},ftime:function(e){return ae["HH:mm:ss"](e,null)},generateGuid:fe,generateShortGuid:$e,includesAll:Re,lang:undefined,listMonths:Oe,listNumberFormat:at,listYears:ze,max:function(e,t){if(0!=e.length)return t?"string"!=typeof t?e.reduce(((e,n,i)=>{const r=t(n,i);return void 0!==r&&(null==e||r>e)?r:e}),void 0):void e.reduce(((e,n)=>n[t]>e?n[t]:e),e[0][t]):e.reduce(((e,t)=>t>e?t:e),e[0])},min:function(e,t){if(0!=e.length)return t?"string"!=typeof t?e.reduce(((e,n,i)=>{const r=t(n,i);return void 0!==r&&(null==e||r<e)?r:e}),void 0):void e.reduce(((e,n)=>n[t]<e?n[t]:e),e[0][t]):e.reduce(((e,t)=>t<e?t:e),e[0])},mround:ve,nextListNumber:function(e,t=0,n,i){let r="";switch(n||(n=st[t%3]),void 0===i&&(i=(e[t]||0)+1),n){case"1.1.":case"1.1.1.":r=i+".";for(let n=t-1;n>=0;n--)r=e[n]+"."+r;break;case"1.1":case"1.1.1":r=""+i;for(let n=t-1;n>=0;n--)r=e[n]+"."+r;break;default:r=at(i,n)}return e[t]=i,e.length=t+1,r},now:je,nullDefault:Ie,padNumber:ie,patterns:y,percent:Pe,get replaceAll(){return ot},smallRomanValue:Xe,sum:Ae,syncArray:ut,toWords:Ue,toWordsMoney:Qe,today:Le,translate:function(e){return e},trim:function(e){return(e||"").trim()}});function dt(e,t,n){const i=t.split("/");let r=0;if("#"===i[0]){if(void 0===n)for(;e.$parent;)e=e.$parent;else e=n;r++}else"."===i[0]?(e.$parent&&(e=e.$parent),r++):e.$parent&&(e=e.$parent);for(let t=r;t<i.length;t++)if(i[t]&&void 0===(e=".."===i[t]?e.$parent:e[i[t]]))return null;return e}const pt={arrayItemGuidField:null,model:null,minified:!1},ft=/{{([a-z.\[\]\s\?\"\'\:\(\)\+]*)}}/gim;function mt(e){const t={};for(const n of Object.keys(e)){const i=e[n];switch(n){case"defs":{const e={};for(const t of Object.keys(i))e[t]=mt(i[t]);t.definitions=e}break;case"p":{const e={};for(const t of Object.keys(i))e[t]=mt(i[t]);t.properties=e,t.type="object"}break;case"i":t.items=mt(i),t.type="array";break;case"d":t.default=i;break;case"dsc":t.description=i;break;case"r":t.required=i;break;case"fr":t.fieldRequired="string"==typeof i?i:!!i;break;case"f":t.format=i;break;case"ti":t.title=i;break;case"w":t.warnings=i;break;case"t":switch(i){case 1:case"m":t.type="money";break;case 2:case"i":t.type="integer";break;case 3:case"n":t.type="number";break;case 4:case"b":t.type="boolean";break;case 5:case"s":t.type="string";break;default:t.type=i}break;default:t[n]=i}}return t}function $t(e){const t={};let n=e.type;for(const i of Object.keys(e)){const r=e[i];switch(i){case"properties":{const e={};for(const t of Object.keys(r))e[t]=$t(r[t]);t.p=e,n=void 0}break;case"definitions":{const e={};for(const t of Object.keys(r))e[t]=$t(r[t]);t.defs=e}break;case"default":t.d=r;break;case"description":t.dsc=r;break;case"items":t.i=$t(r),n=void 0;break;case"required":t.r=r;break;case"fieldRequired":t.fr="string"==typeof r?r:r?1:0;break;case"format":t.f=r;break;case"title":t.ti=r;break;case"type":case"$id":case"$schema":case"extends":break;case"warnings":t.w=r;break;default:t[i]=r}}if(n)switch(n){case"money":t.t=1;break;case"integer":t.t=2;break;case"number":t.t=3;break;case"boolean":t.t=4;break;case"string":t.t=5;break;default:t.t=n}return t}function gt(e,t=pt,n,i,r,a){const s={},o={};Object.defineProperty(o,"$key",{value:r||null}),Object.defineProperty(o,"$parent",{value:n||null});let l=i;null==i&&(i=o,l=e[0]);let c=0;for(;c<e.length;){let n=e[c];const i=n.allOf;if(void 0!==i){const t=[];for(let n=0;n<c;n++)t.push(e[n]);t.push(n);for(let e=0;e<i.length;e++)t.push(i[e]);for(let n=c+1;n<e.length;n++)t.push(e[n]);n=(e=t)[c]}let r=n.$ref;if(void 0!==r){r.indexOf("{{")>-1&&(r=r.replace(ft,((e,n)=>{if(!t.model)return"";const i=new Function("model","with(model) {return "+n+"}");try{return i(t.model)}catch(e){return""}})));const i=dt(o,r,l);null!==i&&(e[c]=n=i)}for(const e of Object.keys(n)){if("allOf"===e)continue;const t=n[e];if(null===t)"default"!==e&&c>0?(delete s[e],delete o[e]):o[e]=null;else if("default"===e)o[e]=t;else if(Array.isArray(t))if(void 0!==o[e]&&"required"===e){const n=o[e].slice();for(let e=0;e<t.length;e++){const i=t[e];-1===n.indexOf(i)&&n.push(i)}o[e]=n}else o[e]=t;else if("object"==typeof t){let n=s[e];void 0===n?s[e]=n=[t]:n.push(t)}else o[e]=t}c++}void 0===o.type?!0!==a&&void 0!==a||(void 0!==s.properties?o.type="object":void 0!==s.items?o.type="array":Object.defineProperty(o,"type",{value:"string"})):"int"===o.type&&(o.type="integer");const u=void 0!==r&&"properties"===r,h=Object.keys(s);for(const e of h){let n;Object.defineProperty(o,e,{enumerable:!0,configurable:!0,get:()=>n||(n=gt(s[e],t,o,i,e,u||"items"===e))})}if("object"===o.type&&n&&"array"===n.type&&t.arrayItemGuidField){const e=o.properties;if(e&&void 0===e[t.arrayItemGuidField]){let n;Object.defineProperty(e,t.arrayItemGuidField,{enumerable:!0,configurable:!0,get:()=>n||(n=gt([{type:"string",format:"guid"}],t,e,i,t.arrayItemGuidField,!1))})}}return o}const yt={type:"Nieprawidłowa wartość",number:"Pole musi być liczbą",money:"Pole musi być liczbą",integer:"Pole musi być liczbą całkowitą",required:"Wartość pola jest wymagana",fieldRequired:"Wartość pola jest wymagana",minimum:"Minimalnie {{minimum}}",maximum:"Maksymalnie {{maximum}}",exclusiveMinimum:"Musi być większe niz {{exclusiveMinimum}}",exclusiveMaximum:"Musi być mniejsze niz {{exclusiveMaximum}}",multipleOf:"Musi być wielokrotnością {{multipleOf}}",maxLength:"Tekst jest zbyt długi, maksymalnie {{maxLength}} znaków",minLength:"Tekst jest zbyt krótki, minimalnie {{minLength}} znaków",maxItems:"Zbyt dużo elementów, maksymalnie {{maxItems}}",minItems:"Za mało elementów, minimalnie {{minItems}}",enum:"Nieprawidłowa wartość",format:"Nieprawidłowy format",pattern:"Nieprawidłowy format",validFunc:"Nieprawidłowa wartość","format.nip":"Nieprawidłowy format, NIP musi składać się z dziesięciu cyfr.","format.url":"Podaj poprawny adres URL","format.email":"Nieprawidłowy format, adres e-mail musi być wprowadzony w formacie nazwa@domena.","format.kod":"Nieprawidłowy format, kod pocztowy musi być wprowadzony w formacie xx-xxx i składać się z samych cyfr."},vt={resetOnFocus:!0,dirtyOnInput:!1,dirtyOnBlur:!0,startDirtyOnCalc:!0,disableCalculations:!1,disableValidations:!1,startDirty:!1,lazyNumbers:!1,schemaMethods:ht,fixData:!0,fixFormat:!1,fixTypes:!1,logErrors:!1,logWarnings:!1,validationMessages:yt,warningMessages:yt,form:{},external:{},readOnly:!1,longGuids:!1,forceCalcEnabled:!1};function bt(e,t,n=0){for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];if(void 0!==r){if(0===n){if("_"===i[0])continue;switch(i){case"external":case"prevModel":case"form":case"i18n":case"Vue":e[i]=r;continue;case"schemaMethods":e.schemaMethods?e.schemaMethods=Object.assign({},e.schemaMethods,t.schemaMethods):e.schemaMethods=t.schemaMethods;continue;case"_disabledFields":case"_readedErrorFields":case"_anyEvent":case"_forceRecalc":continue}}"object"!=typeof r||null==r||Array.isArray(r)?e[i]=r:(void 0===e[i]&&(e[i]={}),bt(e[i],r,n+1))}}}const _t=eval;class wt{constructor(){this.$methods=ht}}function xt(e,t){for(const n of Reflect.ownKeys(t)){const i=t[n];"function"==typeof i?e[n]=g(i.toString()):"pattern"===n&&i.constructor===RegExp?i.source&&(e.pattern=i.source,""===i.flags?e.patternFlags=null:"i"!=i.flags&&(e.patternFlags=i.flags)):e[n]=i}}function kt(e,t){const n=e.constructor,i=n.name,r="schema_"+(t||i);let a=n.prototype[r];if(!a){a={type:"object",$id:i,properties:{}};const t=Object.getPrototypeOf(e);if(t&&t.constructor&&t.constructor.name&&"Object"!==t.constructor.name){const e=kt(t,t.constructor.name);e&&e.properties&&Object.keys(e.properties).length&&(a.extends=e.$id,a.properties=Object.assign({},e.properties),Object.defineProperty(a,"ownProperties",{enumerable:!1,value:{}}))}n.prototype[r]=a}return a}function Ft(e){if(e){let t="";if(e.get)t=e.get.toString();else{if(!e.value)return;t=e.value.toString()}return g(t)}}function Mt(e,t,n,i,r){const a=kt(e),s=function(e,t,n,i,r){let a=e[t];if(void 0===a&&(a=e[t]={},!i||!i.type||r)){let e;if(!r&&Reflect.getMetadata){if((r=Reflect.getMetadata("design:type",n,t))&&(e=r.name,"Function"===e)){const i=Reflect.getMetadata("design:returntype",n,t);i&&i.name&&(e=i.name)}}else e="Array"===r?"Array":r.name;if(e){switch(e){case"Array":{e="";let t=i.itemType||"String";switch(t){case"String":case String:t="string";break;case"Object":t="object";break;case"Boolean":case Boolean:t="boolean";break;case"Number":case Number:t="number";break;case"money":case"integer":break;default:if("function"!=typeof t||t.prototype){Array.isArray(t)&&(t=t[0]);const e=(""+t).split(" ");"class"!==e[0]&&"function"!==e[0]||(e[0]=e[1].replace("(","").replace(")",""));const n=Dt(t);a.items=n||{type:"object",properties:{}}}else a.items=t.call()||{type:"string"};a.type="array",t=""}t&&(a.type="array",a.items={type:t}),delete i.itemType}break;case"String":case"Function":e="string";break;case"Object":e="object";break;case"Boolean":e="boolean";break;case"Number":e="number";break;default:try{let t={};t=r.prototype?Dt(r):Dt(e),a.type="object",t?(a.properties=t.properties,t.$id&&(a.$id=t.$id)):a.properties={},e=""}catch(e){}}e&&(a.type=e)}}return i&&xt(a,i),a}(a.ownProperties||a.properties,t,e,i,r);if(a.properties[t]=s,n&&!s.calc){const e=Ft(n);e&&(s.calc=e)}return s}function Dt(e,t=!1){"string"==typeof e&&(e=_t(e));const n=e.prototype["schema_"+e.name];if(n&&t){const t=new e,i=gt([n]),r=i.properties;for(const e in t)if(t.hasOwnProperty(e)){const n=t[e];if(void 0!==n){const t=r[e];void 0!==t&&void 0===t.default&&(t.default=n)}}return i}return n}function St(e,t=!1){return Dt(e,t)||{type:"object",properties:{}}}function Ot(e,t){return(n,i,r)=>{if(!n){if(t){let n;t.prototype&&(n=Dt(t),n&&(e.type="object",e.properties=n.properties,n.$id&&(e.$id=n.$id)))}return xt(e,e),e}Mt(n,i,r,e,t)}}function zt(e={}){return e.type="money",Ot(e)}function Ct(e={}){return e.type="integer",Ot(e)}function Rt(e={}){return e.type="string",Ot(e)}function Pt(e={}){return e.fieldRequired=!0,Ot(e)}function jt(e,t={}){return t.type="string",t.format=e,Ot(t)}function It(e={}){return jt("guid",e)}function Lt(e){return Ot({aggregate:e})}function At(e={}){return t=>{const n="schema_"+t.name,i=Reflect.getMetadata(n,t);if(i)for(const t in e)if(e.hasOwnProperty(t))switch(t){case"validationMessages":case"warningMessages":case"methods":i[t]=Object.assign(i[t]||{},e[t]);break;default:i[t]=e[t]}return t}}function Nt(e={}){return t=>{const n="schema_"+t.name,i=t.prototype[n];let r=null;if(i)for(const t in e){r||(r=i.$options,r||(r=i.$options={}));const n=e[t];switch(t){case"validationMessages":case"warningMessages":case"$methods":r[t]=Object.assign(r[t]||{},n);break;default:r[t]=n}}return t}}function Et(e=null,t=null){return"string"==typeof e&&(e=[e]),"string"==typeof t&&(t=[t]),(n,i,r)=>{if(null===e){const n=i.toString().split("_");e=[n[0]],null===t&&(t=[n[1]])}if(null!==t&&r){const i=Ft(r),a=i&&"string"==typeof i?+i:NaN,s=kt(n);if(s){const n=s.ownProperties||s.properties;for(const r of e){const e=n[r];if(e)for(const n of t)if(e[n]=i,!isNaN(a))switch(n){case"length":case"minimum":case"maximum":case"exclusiveMaximum":case"exclusiveMinimum":case"multipleOf":case"maxLength":case"minLength":case"maxItems":case"minItems":e[n]=a}}}}}}const Tt={Number:function(e={}){return e.type="number",Ot(e)},Integer:Ct,Money:zt,String:Rt,Format:jt,Date:function(e={}){return jt("date",e)},DateTime:function(e={}){return jt("date-time",e)},Nip:function(e={}){return jt("nip",e)},Guid:It,Boolean:function(e={}){return e.type="boolean",Ot(e)},Array:function(e,t={}){return t.itemType=e,Ot(t,"Array")},Object:function(e,t={}){return Ot(t,e)},Required:Pt,Title:function(e){return Ot({title:e})},Valid:Et,Aggregate:Lt},Kt=ht;function Vt(e,t){if(null===t)return!0;switch(e.type){case"object":return"object"==typeof t;case"array":return Array.isArray(t);case"integer":case"number":case"money":return"number"==typeof t&&("integer"!==e.type||t%1==0);case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;default:return!1}}const Wt=e=>"function"==typeof e,Gt=e=>null!==e&&"object"==typeof e,Ut=new Set([]),Bt=new Set(["enum","calc","fieldRequired","readOnly","disabled","minimum","maximum","exclusiveMaximum","exclusiveMinimum","precision","maxItems","minItems","maxLength","minLength"]);function Zt(e,t={}){if(e.$alreadyCompiled)return e;for(const n in e){const i=e[n];switch(n){case"$ref":break;case"$external":case"$parent":case"$parent2":case"$parent3":case"$root":delete e[n];break;case"$methods":if(Gt(i))for(const e in i){const n=i[e];if(Wt(n)){const r={body:g(n,{skipRemoveReturn:!0,removeDebugger:t.removeDebugger})};if(n.length){const t=n.toString(),a=t.indexOf("(");if(a>-1){const e=t.indexOf(")",a);r.args=t.substring(a+1,e)}i[e]=r}else i[e]=r.body}}break;case"$on":if(Gt(i))for(const e in i){const n=i[e],r={body:g(n,{skipRemoveReturn:!0,removeDebugger:t.removeDebugger})};if(n.length){const e=n.toString(),t=e.indexOf("(");if(t>-1){const n=e.indexOf(")",t);r.args=e.substring(t+1,n).split(",")[0]}}1==n.length&&"event"==r.args?i[e]=r.body:i[e]=r}break;case"properties":"object"!==e.type&&(delete e[n],e.type="object",e[n]=i);for(const e in i){const n=i[e];if(Wt(n)){const r=n();Zt(r,t),i[e]=r}else Gt(n)&&Zt(n,t)}break;case"items":if("array"!==e.type&&(delete e[n],e.type="array",e[n]=i),Wt(i)){const r=i();Zt(r,t),e[n]=r}else Gt(i)&&Zt(i,t);break;case"pattern":i instanceof RegExp?(e[n]=i.source,"i"!=i.flags&&(""==i.flags?e.patternFlags=null:e.patternFlags=i.flags)):Wt(i)&&(e[n]=g(i,{skipRemoveReturn:!0,removeDebugger:t.removeDebugger}));break;default:Wt(i)?Ut.has(n)||(e[n]=g(i,{skipRemoveReturn:!Bt.has(n),removeDebugger:t.removeDebugger})):Gt(i)&&Zt(i,t)}}return e}function qt(e){const t=Zt(e);return Object.defineProperty(t,"$alreadyCompiled",{value:!0,enumerable:!1}),t}function Yt(...e){return sn(e)}class Ht{constructor(e,t,n,i){i&&(this.fixSchema=this.defineSchemaSimple,this.defineSchema=this.defineSchemaSimple)}defineSchema(...e){return 1==e.length?qt(e[0]):qt(sn(e))}defineSchemaSimple(...e){return 1==e.length?e[0]:sn(e)}fixSchema(...e){return qt(sn(e))}}function Jt(e,t,n){return new Ht(e||{},t||{},n||{},!1).defineSchema}const Xt=Jt();function Qt(e,t,n){return new Ht(e||{},t||{},n||{},!1).fixSchema}const en=Qt();function tn(e,t,n){return new Ht(e||{},t||{},n||{},!0).defineSchema}const nn=tn();function rn(e,t,n){return new Ht(e||{},t||{},n||{},!0).fixSchema}const an=rn();function sn(e){const t={},n={};for(let i=0;i<e.length;i++){const r=e[i];for(const e in r){const i=r[e];if("_"===e||"*"===e)if(i.$fields){const e=[];let n=i.$fields;if(Wt(n)&&(n=n.call(t)),Array.isArray(n))for(let i of n)"string"==typeof i&&(i=t[i]),i&&e.push(i);delete i.$fields;for(const t of e)t.push(i)}else for(const e in t){t[e].push(i)}else if(void 0===i)delete t[e],delete n[e];else if("default"===e)n[e]=i;else if(Array.isArray(i))delete t[e],n[e]=i;else if(Wt(i))delete t[e],n[e]=i;else if(Gt(i)){let n=t[e];null==n&&(n=[],t[e]=n),n.push(i)}else delete t[e],n[e]=i}}for(const e in t){const i=t[e];1==i.length?n[e]=i[0]:n[e]=sn(i)}return n}function on(e,t=!0,n=!0){const i={},r={};if(t&&e.$methods){for(const t in e.$methods){let n=!1;const a=e.$methods[t];if(!Wt(a))if(n=!0,Gt(a))for(const e in a){const r=a[e];Wt(r)||Gt(r)?n=!1:i[t+"."+e]=JSON.stringify(r)+" /* this.$methods."+t+"."+e+" */"}else i[t]=JSON.stringify(a)+" /* this.$methods."+t+" */";n&&(r[t]=e.$methods[t],delete e.$methods[t])}0==Object.keys(e.$methods).length&&delete e.$methods}let a=!1;n&&(e.$options||(e.$options={}),e.$options.simpleThis||(e.$options.simpleThis=!0,a=!0));let s=function(e){let t=JSON.stringify(e,((e,t)=>"function"==typeof t?"[FUNCTION]"+t:t),"  ").replace(/"(\[FUNCTION])?((?:\\.|[^\\"])*)"(:)?/g,((e,t,n,i)=>t?JSON.parse('"FUNCTION'+n+'"'):i&&/^\w+$/.test(n)?n+":":e));return t=t.replace(/(\b\w+\b):\s*FUNCTION(function\s)?\1\s*\(/g,((e,t)=>t?t+"(":e)),t=t.replace(/(\b\w+\b):\s*FUNCTION\s*\(/g,((e,t)=>t?t+": (":e)),t}(e);if(t){for(const e in i)s=ot(s,"this.$methods."+e,i[e]);for(const t in r)e.$methods||(e.$methods={}),e.$methods[t]=r[t]}return n&&(s=s.replace(/this\.\$(methods|root|external|parent3|parent2|parent|model|obj|event|value)/g,((e,t)=>"$"+t)),a&&e.$options&&e.$options.simpleThis&&(delete e.$options.simpleThis,0==Object.keys(e.$options).length&&delete e.$options)),s}function ln(e,t,n,i=vt,r=""){if(!(e.computed||void 0!==e.disabled&&(!0===e.disabled||i&&i._disabledFields&&i._disabledFields.has(r)))){if("object"===e.type){if("object"!=typeof t)return;if(null===t)return null;const a={},s=e.properties;if(s){const e=""===r?r:r+".";for(const r in s){const o=t[r],l=s[r];if(void 0!==o){const t=ln(l,o,n,i,e+r);void 0!==t&&(a[r]=t)}}}return a}if("array"!==e.type){if(!Array.isArray(t)&&!Gt(t)&&(!n||Vt(e,t))&&(!n||""!==t||"date"!==e.format&&"date-time"!==e.format))return t}else if(Array.isArray(t)){const a=[],s=e.items;for(let e=0;e<t.length;e++){const o=ln(s,t[e],n,i,r+"["+e+"]");void 0!==o&&a.push(o)}return a}}}function cn(e,t,n,i){const r=new un;return hn(e,t,n,"",r,i),r}class un{constructor(){this.equal=!0,this.diff=[]}}function hn(e,t,n,i,r,a){if("object"===e.type){if("object"!=typeof t&&(t={}),"object"!=typeof n&&(n={}),e.properties)for(const s in e.properties){hn(e.properties[s],t[s],n[s],""===i?s:i+"."+s,r,a)}}else if("array"===e.type){const s=e.items;if(s){Array.isArray(t)||(t=[]),Array.isArray(n)||(n=[]),t.length!==n.length&&a&&(r.equal=!1,r.diff.push({path:i,type:"arrayLength",value:[t.length,n.length],schema:e}));const o=Math.max(t.length,n.length);for(let e=0;e<o;e++)hn(s,t[e],n[e],i+"["+e+"]",r,a)}}else{if(void 0===t&&void 0===n)return;if(void 0===t||void 0===n)return r.equal=!1,void r.diff.push({path:i,type:"value",value:[t,n],schema:e});if(""+t!=""+n)return r.equal=!1,void r.diff.push({path:i,type:"value",value:[t,n],schema:e})}}function dn(e,t,n,i){const r=t[n];if(""===r)return n===t.length-1?void 0:dn(e,t,n+1,i);if(i){if("object"===i.type&&i.properties){const a=i.properties[r];if(void 0===a)return;let s=e[r];if(void 0===s){if(void 0===a.default)return;s=a.default}return n===t.length-1?s:dn(s,t,n+1,a)}if("array"===i.type){const a=i.items;if(void 0===a)return;let s=e[Number(r)];if(void 0===s){if(void 0===a.default)return;s=a.default}return n===t.length-1?s:dn(s,t,n+1,a)}}else;}function pn(e,t,n){return dn(t,n.replace(/\[/g,".").replace(/\]/g,"").split("."),0,e)}function fn(e,t=!1,n=null,i=vt,r=""){var a;let s=null;const o=e.type||e.properties&&"object"||e.items&&"array"||"string";if(Wt(e.default))return;let l=!1;if(void 0!==e.disabled&&(l=!0===e.disabled||!!(null===(a=i._disabledFields)||void 0===a?void 0:a.has(r))),"object"===o){if(void 0!==e.default)return null===e.default?null:Object.assign({},e.default);s={};let a=!0;if(e.properties){const o=""===r?r:r+".";for(const r in e.properties){const l=fn(e.properties[r],t,n,i,o+r);void 0!==l&&(s[r]=l,a=!1)}}if(!a||void 0===e.$parent||t)return s}else if("array"===o){let a=0;if(void 0!==e.default){if("number"!=typeof e.default)return Array.from(e.default);a=e.default}void 0!==e.length&&"number"==typeof e.length&&(a=e.length),s=[];let o=!0;if(e.items&&a&&!l)for(let l=0;l<a;l++){const a=fn(e.items,t,n,i,r+"["+l+"]");s.push(a),o=!1}if(!o||void 0===e.$parent||t)return s}if(void 0!==e.default){if("string"===o)switch(e.format){case"date":switch(e.default){case"today":case"now":return Le()}break;case"date-time":switch(e.default){case"today":return Le()+" 00:00:00";case"now":return je()}break;case"guid":case"guidshort":case"guidlong":switch(e.default){case"generate":case"new":return(null==i?void 0:i.longGuids)||"guidlong"==e.format?fe():$e()}}return e.default}if(t)switch(o){case"number":case"money":case"integer":return n;case"boolean":return!1;case"string":switch(e.format){case"guid":return(null==i?void 0:i.longGuids)?fe():$e();case"guidshort":return $e();case"guidlong":return fe();default:return""}}}function mn(e,t,n,i,r=0,a,s=vt,o=""){if(i){"string"==typeof i&&"$"==(i=i.replace(/\[/g,".").replace(/\]/g,"").split(".").filter((e=>e)))[r=0]&&r++;const l=i[r];if(l){if("object"===e.type){const c=e.properties[l];if(void 0!==c){const e=o?o+"."+l:l;if("object"===c.type||"array"===c.type){let o=t[l];return void 0===o&&(o=fn(c,!0,void 0,s,e),t[l]=o),mn(c,o,n,i,r+1,a,s,e)}return gn(c,t,l,n)}return!1}if("array"===e.type){const c=e.items;if(void 0!==c){const e=parseInt(l,10);if(void 0===t[e])for(;t.length<e+1;)t.push(fn(c,!0,void 0,s,o+"["+t.length+"]"));return"array"===c.type||"object"===c.type?mn(c,t[e],n,i,r+1,a,s,o+"["+e+"]"):gn(c,t,e,n)}return!1}return!1}}return"object"===e.type?vn(e,t,n,a,s,o):yn(e,t,n,a,s,o)}function $n(e,t){if(null!=t)switch(e.type){case"array":if(!Array.isArray(t))return[t];break;case"object":if(!Gt(t)){if("string"!=typeof t)return;try{return JSON.parse(t)}catch(e){return}}break;case"number":case"money":case"integer":if("string"==typeof t&&(t=+t.replace(",","."),isNaN(t)))return;if("number"==typeof t)if(e.precision&&"number"==typeof e.precision)t=ve(t,e.precision);else switch(e.type){case"integer":t=ve(t,0);break;case"money":t=ve(t,2);break;case"number":t=ve(t,8)}break;case"boolean":"string"==typeof t?t="false"!==t&&"off"!==t&&""!==t:"number"==typeof t&&(t=0!=t);break;case"string":if("number"==typeof t)t=""+t;else if("boolean"==typeof t)t=t?"true":"false";else if("object"==typeof t)if(t instanceof Date)t=re(t);else{let e=""+t;"[object Object]"===e&&(e=JSON.stringify(t)),t=e}if("string"==typeof t)switch(e.format){case"uppercase":t=t.toLocaleUpperCase();break;case"lowercase":t=t.toLocaleLowerCase();break;case"capitalize":t=ge(t);break;case"date":t&&t.length>10&&(t=t.substring(0,10)),G("date",t)||(t="");break;case"date-time":if(t.indexOf("Z")>-1){const e=new Date(t);t=isNaN(e.getTime())?"":re(new Date(t))}else 10===t.indexOf("T")&&(t=t.replace("T"," "));t.length<19&&t.length>=10&&(t=t.substring(0,10)+" 00:00:00"),G("date-time",t)||(t="")}}return t}function gn(e,t,n,i){return(null==i||null!=(i=$n(e,i)))&&(!!Vt(e,i)&&(t[n]=i,!0))}function yn(e,t,n,i,r=vt,a=""){if(void 0===n)return!1;if(void 0===(n=$n(e,n)))return!1;const s=e.items;if(i)for(;t.length>n.length;)t.splice(t.length-1,1);let o=0;for(let e=0;e<n.length;e++){const l=t[e];let c;l&&(o=e);const u=a+"["+e+"]";switch(s.type){case"object":c=l||fn(s,!0,void 0,r,u),vn(s,c,n[e],i,r,u)&&(c!=l&&(t[o]=c),o++);break;case"array":c=l||fn(s,!0,void 0,r,u),yn(s,c,n[e],i,r,u)&&(c!=l&&(t[o]=c),o++);break;default:gn(s,t,o,n[e])&&o++}}return!0}function vn(e,t,n,i,r=vt,a=""){const s=e.properties;if(!s)return!1;if(void 0===(n=$n(e,n)))return!1;for(const e in n)if(n.hasOwnProperty(e)){const o=s[e];if(void 0!==o){const s=a?a+"."+e:e,l=n[e];switch(o.type){case"object":{if(null===l){gn(o,t,e,null);continue}let n=t[e];null==n&&(gn(o,t,e,fn(o,!1,null,r,s)||{}),n=t[e]),vn(o,n,l,i,r,s)}break;case"array":{if(null===l){gn(o,t,e,null);continue}let n=t[e];null==n&&(t[e]=n=fn(o,!0,void 0,r,s)),yn(o,n,l,i,r,s)}break;default:gn(o,t,e,l)}}}return!0}function bn(e,t,n=!0,i=vt,r=""){let a=0;if("object"===e.type){const s=e.properties,o=r?r+".":r;for(const r in e.properties){const e=s[r];void 0===t[r]?(gn(e,t,r,fn(e,n,void 0,i,o+r)),a++):null!==t[r]||"array"!==e.type&&"object"!==e.type?a+=bn(e,t[r],n,i,o+r):(gn(e,t,r,fn(e,n,void 0,i,o+r)),a++)}}else if("array"===e.type){const s=e.items;for(let e=0;e<t.length;e++){a+=bn(s,t[e],n,i,r+"["+e+"]")}}return a}function _n(e,t){let n=e[t],i=!1;return n&&n.length>10&&(n=n.substring(0,10),i=!0),i&&(e[t]=n),i}function wn(e,t){let n=e[t],i=!1;return n&&(10===n.indexOf("T")&&(n=n.replace("T"," "),i=!0),n.length<19&&n.length>=10&&(n=n.substring(0,10)+" 00:00:00",i=!0)),i&&(e[t]=n),i}function xn(e,t,n){const i=e[t];if(i){let r=i;switch(n){case"uppercase":r=i.toLocaleUpperCase();break;case"lowercase":r=i.toLocaleLowerCase();break;case"capitalize":r=ge(i)}if(i!==r)return e[t]=r,!0}return!1}function kn(e,t){let n=0;if("object"===e.type){const i=e.properties;for(const r in e.properties){const e=i[r];switch(e.type){case"object":case"array":kn(e,t[r]);break;case"string":switch(e.format){case"date-time":n+=wn(t,r)?1:0;break;case"date":n+=_n(t,r)?1:0;break;case"uppercase":case"lowercase":case"capitalize":n+=xn(t,r,e.format)?1:0}}}}else if("array"===e.type){const i=e.items;for(let e=0;e<t.length;e++)switch(i.type){case"object":case"array":n+=kn(i,t[e]);break;case"string":switch(i.format){case"date-time":n+=wn(t,e)?1:0;break;case"date":n+=_n(t,e)?1:0;break;case"uppercase":case"lowercase":case"capitalize":n+=xn(t,e,i.format)?1:0}}}return n}function Fn(e,t){const n=e.$key;if(e.$parent){let t=Fn(e.$parent);return e.$parent&&"array"===e.$parent.type&&(t+="[]"),void 0===e.type||"object"===e.type&&e.$parent&&"array"===e.$parent.type?t:""===t?n:t+"."+n}return void 0===e.type?"":n||""}function Mn(e,t=!1,n=[]){if(void 0===e.$parent&&(e=gt([e])),e.$key&&(t?"object"!==e.type&&"array"!==e.type&&n.push({path:Fn(e).replace("[]",""),field:e.$key,schema:e}):n.push({path:Fn(e),field:e.$key,schema:e})),"object"===e.type){if(e.properties)for(const i in e.properties)Mn(e.properties[i],t,n)}else"array"===e.type&&e.items&&Mn(e.items,t,n);return n}function Dn(e,t,n="***"){if(e.gdpr)switch(e.type){case"array":return e.default?Array.from(e.default):void 0;case"object":default:return;case"string":return function(e,t="***"){if(null!=e)switch(t){case"***":return"***";case"a**b":{const t=e.split(" ").reduce(((e,t)=>(t.length>=2&&e.push(t.substring(0,1)+"**"+t.substring(t.length-1)),e)),[]);return 0==t.length?"***":t.join(" ")}default:return}}(t,n)}if("object"===e.type){if("object"!=typeof t)return;if(null===t)return null;const i={},r=e.properties;if(r)for(const e in r){const a=t[e],s=r[e];if(void 0!==a){const t=Dn(s,a,n);void 0!==t&&(i[e]=t)}}return i}if("array"!==e.type)return t;if(Array.isArray(t)){const i=[],r=e.items;for(let e=0;e<t.length;e++){const a=Dn(r,t[e],n);void 0!==a&&i.push(a)}return i}}function Sn(e,t){return On(t.replace(/\[/g,".").replace(/\]/g,"").split("."),0,e)}function On(e,t,n){const i=e[t];if(""===i)return t===e.length-1?null:On(e,t+1,n);if("object"===n.type&&n.properties){const r=n.properties[i];return void 0===r?null:t===e.length-1?r:On(e,t+1,r)}if("array"===n.type&&n.items){const i=n.items;return void 0===i?null:t===e.length-1?i:On(e,t+1,i)}return null}function zn(e){return e.indexOf("$parent")>-1?e.replace(/\$parent\.\$parent\.\$parent\./g,"$parent3.").replace(/\$parent\.\$parent\./g,"$parent2.").replace(/\$parent4./g,"$obj.$parent.$parent.$parent.$parent.$model").replace(/\$parent5./g,"$obj.$parent.$parent.$parent.$parent.$parent.$model"):e}const Cn="$root,$parent,$parent2,$parent3,$external,$methods,$obj,$value,$event",Rn={};function Pn(e,t,n,i){var r,a,s,o;if(e.aggregate){if(e.__cache&&e.__cache.aggregateFunc)return e.__cache.aggregateFunc;let n=null;const i=e.aggregate.func||"sum";let l=e.aggregate.when||e.aggregate.if,c="";if(t&&(c=`agg||${i}||array:${e.aggregate.array}||prop:${e.aggregate.property}`+(l?"||when:"+l:"")+"||type:"+e.type+(e.precision?"||prec:"+e.precision:""),n=Rn[c],n))return Object.defineProperty(e,"_aggregateFunc",{value:n}),n;let u=e.aggregate.array;Array.isArray(u)||(u=[u]);let h=!1;l&&(l=zn(l),h=!0);let d=e.aggregate.property,p="";if(d){/[\$\.]/.test(d)?(h=!0,d=zn(d)):d="$array[$index]."+d}else if("array"===e.type&&"object"===(null===(r=e.items)||void 0===r?void 0:r.type)){h=!1;p+="\n  var $item = $array[$index]; $item = {"+Object.keys((null===(a=e.items)||void 0===a?void 0:a.properties)||{}).map((t=>{var n,i;return"array"===((null===(n=e.items)||void 0===n?void 0:n.properties)||{})[t].type||"object"===((null===(i=e.items)||void 0===i?void 0:i.properties)||{})[t].type?t+": $item."+t+"===undefined ? undefined : $methods.deepCopy($item."+t+")":t+": $item."+t})).join(", ")+"}",d="$item"}else d="$array[$index]";h&&(p+="\n  var $item = $array[$index];");let f="var $length = 0;\n";switch(i){case"mul":f+="var $result = 1;\n";break;case"min":"string"===e.type?f+="var $result = 'źźźźźźźźźźźź';\n":f+="var $result = Infinity;\n";break;case"max":"string"===e.type?f+="var $result = '';\n":f+="var $result = -Infinity;\n";break;case"map":case"distinct":f+="var $result = [];\n";break;case"distinctitem":f+="var $result = [];\n",f+="var $distinct = {};\n";break;default:switch(e.type){case"string":f+="var $result='';\n";break;case"object":f+="var $result=null;\n";break;default:f+="var $result = 0;\n"}}let m="";switch(i){case"avg":case"sum":m+=`$result += (${d}); // func: ${i}`;break;case"max":m+=`var $v = (${d}); // func: ${i}\n`,m+="  if ($v > $result)\n",m+="    $result=$v";break;case"min":m+=`var $v = (${d}); // func: ${i}\n`,m+="  if ($v < $result)\n",m+="    $result=$v";break;case"mul":m+=`$result *= (${d}); // func: ${i}`;break;case"count":m+=`$result++; // func: ${i}`;break;case"first":case"last":m+=`$result = (${d});break; // func: ${i}`;break;case"map":m+=`$result.push(${d}); // func: ${i}`;break;case"distinct":m+=`var $v = (${d}); // func: ${i}\n`,m+="  if ($result.indexOf($v)===-1)\n",m+="    $result.push($v)";break;case"distinctitem":{let t="";if("array"===e.type&&"object"===(null===(s=e.items)||void 0===s?void 0:s.type)){h||(t+="    var $item = $array[$index];\n"),t+="    $result.push({"+Object.keys((null===(o=e.items)||void 0===o?void 0:o.properties)||{}).map((t=>{var n,i;return"array"===((null===(n=e.items)||void 0===n?void 0:n.properties)||{})[t].type||"object"===((null===(i=e.items)||void 0===i?void 0:i.properties)||{})[t].type?t+": $item."+t+"===undefined ? undefined : $methods.deepCopy($item."+t+")":t+": $item."+t})).join(", ")+"})\n"}else t="    $result.push($array[$index]);\n";m+=`var $v = (${d}); // func: ${i}\n`,m+="  if ($distinct[$v]===undefined) {\n",m+=t,m+="    $distinct[$v] = $index;\n",m+="  }"}}m=l?"first"===i||"map"===i||"distinct"===i||"distinctitem"===i?`var $arrayLength = $array.length;\nfor(var $index = 0; $index < $arrayLength; $index++) {${p}\n  if (${l}) { // if: ${e.aggregate.when||e.aggregate.if}\n    $length++;\n    ${m}\n  }\n}`:`var $index = $array.length;\nwhile($index--) {${p}\n  if (${l}) { // if: ${e.aggregate.when||e.aggregate.if}\n    $length++;\n    ${m}\n  }\n}`:"first"===i||"map"===i||"distinct"===i||"distinctitem"===i?`var $arrayLength = $array.length;\n$length += $arrayLength;\nfor(var $index = 0; $index < $arrayLength; $index++) {${p}\n  ${m}\n}`:`var $index = $array.length;\n$length += $index;\nwhile($index--) {${p}\n  ${m}\n}`;for(let t of u){let n=null;const i=t.indexOf("/");i>-1&&(n=t.substring(i+1),t=t.substring(0,i));/[\$\.]/.test(t)||(t="this."+t),t=zn(t),n?f+=`\nvar $parentArray = ${t}; // array: ${e.aggregate.array}\nvar $parentLength = $parentArray.length;\nfor(var $parentIndex=0; $parentIndex<$parentLength; $parentIndex++) {\n  var $array=$parentArray[$parentIndex].${n};\n  if ($array) {\n    ${m}\n}\n}`:(f+=`\nvar $array = ${t};\n`,f+=m+"\n")}switch("avg"===i&&(f+="\nif ($length)\n  $result /= $length;"),i){case"mul":f+="\nif ($length===0)\n  $result=0;";break;case"min":case"max":"string"===e.type?f+="\nif ($length === 0)\n  $result = '';":f+="\nif ($length === 0)\n  $result = 0;"}switch(e.type){case"integer":f+="\nreturn $methods.mround($result,0);";break;case"money":e.precision?f+=`\nreturn $methods.mround($result,${e.precision});`:f+="\nreturn $methods.mround($result,2);";break;case"number":e.precision?f+=`\nreturn $methods.mround($result,${e.precision});`:f+="\nreturn $result;";break;case"object":f+="\nreturn !$result ? null : {"+Object.keys(e.properties||{}).map((t=>"array"===(e.properties||{})[t].type||"object"===(e.properties||{})[t].type?t+": $result."+t+"===undefined ? undefined : $methods.deepCopy($result."+t+")":t+": $result."+t)).join(", ")+"}";break;default:f+="\nreturn $result;"}return n=new Function("{"+Cn+"}",f),c&&(e.__cache||Object.defineProperty(e,"__cache",{value:{}}),e.__cache.aggregateFunc=n,Rn[c]=n),n}}const jn={};function In(e,t,n,i){let r=null;const a=e.calc;if(a){if(Wt(a))return a;if(e.__cache&&e.__cache.calcFunc)return e.__cache.calcFunc;let n=e.calc,i="",s="",o="";a.func&&(n=a.func,i=a.when);let l="";if(t&&(l="calc"+(i?`||when:${i}`:"")+`||type:${e.type}`+(e.precision?`||prec:${e.precision}`:"")+`||text:${n}`,r=jn[l],void 0!==r))return void 0===e.__cache&&Object.defineProperty(e,"__cache",{value:{}}),Object.defineProperty(e.__cache,"calcFunc",{value:r}),r;Array.isArray(n)?(n=n.join("\r\n"),o=zn(n),s=o+"\r\n"):o=zn(n),/(return[\s\"\!\'\(\;]|return$)/.test(o)||(s=-1==o.indexOf("$result")?`return (${o});`:`var $result;\r\n${o}\r\nreturn $result;`),i&&(s=`if (${zn(i)}) {\r\n  ${s}}`),r=new Function("{"+Cn+"}",s),l&&(jn[l]=r,void 0===e.__cache&&Object.defineProperty(e,"__cache",{value:{}}),e.__cache.calcFunc=r)}return r}const Ln={minimum:/\{\{minimum\}\}/g,maximum:/\{\{maximum\}\}/g,exclusiveMaximum:/\{\{exclusiveMaximum\}\}/g,exclusiveMinimum:/\{\{exclusiveMinimum\}\}/g,multipleOf:/\{\{multipleOf\}\}/g,maxLength:/\{\{maxLength\}\}/g,minLength:/\{\{minLength\}\}/g,maxItems:/\{\{maxItems\}\}/g,minItems:/\{\{minItems\}\}/g,pattern:/\{\{pattern\}\}/g,format:/\{\{format\}\}/g,enum:/\{\{enum\}\}/g,title:/\{\{title\}\}/g,value:/\{\{value\}\}/g},An=/{{\s*(\w*)\s*}}/gim;function Nn(e,t,n,i,r){var a,s,o,l,c,u;i=i||e.schema;const h=null===(a=e.options._i18n)||void 0===a?void 0:a.value,d=null!==(o=null===(s=e.options._lang)||void 0===s?void 0:s.value)&&void 0!==o?o:ne.current;let p=t;const f=r?null===(l=e.schema.warnings)||void 0===l?void 0:l.warningMessages:e.schema.validationMessages;if(f){let n="";r?e.schema.warnings&&("format"===t&&e.schema.warnings.format?n=f["format."+e.schema.warnings.format]:"type"===t&&e.schema.warnings.type&&(n=f["type."+e.schema.warnings.type])):"format"==t&&e.schema.format?n=f["format."+e.schema.format]:"type"==t&&e.schema.type&&(n=f["type."+e.schema.type]),n||(n=f[t]),n&&(p=h?h.t(n):n)}if(h&&p==t){let n=p,i=h.t(n);if(i===n){const a=r?"warningMessages.":"validationMessages.",s=r?null===(c=e.schema.warnings)||void 0===c?void 0:c.format:e.schema.format,o=r?null===(u=e.schema.warnings)||void 0===u?void 0:u.type:e.schema.type;"format"===t&&s?(n=a+"format."+s,i=h.t(n)):"type"===t&&o&&(n=a+"type."+o,i=h.t(n)),i===n&&(n=a+t,i=h.t(n))}i!==n&&(p=i)}if(p==t){const n=r?e.options.warningMessages:e.options.validationMessages;let i="";r?e.schema.warnings&&("format"===t&&e.schema.warnings.format?i=n["format."+e.schema.warnings.format]:"type"===t&&e.schema.warnings.type&&(i=n["type."+e.schema.warnings.type])):"format"==t&&e.schema.format?i=n["format."+e.schema.format]:"type"==t&&e.schema.type&&(i=n["type."+e.schema.type]),i||(i=n[t]),i&&(p=i)}return r?"number"==typeof e.schema.warnings[t]&&(p=p.replace(Ln[t]||"rrr",(()=>void 0===e.schema.warnings[t]?"":be(e.schema.warnings[t])))):"number"==typeof e.schema[t]&&(p=p.replace(Ln[t]||"rrr",(()=>void 0===e.schema[t]?"":be(e.schema[t],void 0,d)))),p.replace(An,((t,a)=>{var s;switch(a){case"key":return e.schema.$key||"";case"title":return i.title||e.schema.$key||"";case"shortTitle":return i.shortTitle||i.title||e.schema.$key||"";case"format":return r?(null===(s=e.schema.warnings)||void 0===s?void 0:s.format)||"":e.schema.format||"";case"value":return n;case"minimum":case"maximum":case"exclusiveMinimum":case"exclusiveMaximum":{const t=r?i.warnings[a]:i[a];if(void 0!==t){if("number"==typeof t)return"money"===e.schema.type?we(t,void 0,void 0,d):be(t,void 0,d);if("string"===e.schema.type)switch(e.schema.format){case"date":return Me(t,void 0,d);case"date-time":return 19===t.length?Me(t,void 0,d)+" "+t.substring(11):10===t.length?`${Me(t,void 0,d)} 00:00:00`:t}return t}return""}default:return r?i.warnings[a]||"":i[a]||""}}))}function En(e,t,n,i=null){return Nn(e,t,n,i,!1)}function Tn(e,t,n,i=null){return Nn(e,t,n,i,!0)}function Kn(e,t,n){let i=n?t._validationFunctions:void 0;if(void 0===i){if(i=[],"array"===e.type)void 0!==t.minItems&&i.push(Wn.minItems),void 0!==t.maxItems&&i.push(Wn.maxItems);else{if("string"===e.type){if(void 0!==t.minimum&&String.prototype&&i.push(Wn.minimumString),void 0!==t.exclusiveMinimum&&i.push(Wn.exclusiveMinimumString),void 0!==t.maximum&&i.push(Wn.maximumString),void 0!==t.exclusiveMaximum&&i.push(Wn.exclusiveMaximumString),void 0!==t.maxLength&&i.push(Wn.maxLength),void 0!==t.minLength&&i.push(Wn.minLength),void 0!==t.pattern&&i.push(Wn.pattern),void 0!==t.format){const e=W(t.format);void 0!==e&&i.push((t=>e(t)?null:"format"))}}else void 0!==t.minimum&&String.prototype&&i.push(Wn.minimum),void 0!==t.exclusiveMinimum&&i.push(Wn.exclusiveMinimum),void 0!==t.maximum&&i.push(Wn.maximum),void 0!==t.exclusiveMaximum&&i.push(Wn.exclusiveMaximum);void 0!==t.enum&&i.push(Wn.enum),"number"!==e.type&&"integer"!==e.type&&"money"!==e.type||t.multipleOf&&i.push(Wn.multipleOf)}n&&Object.defineProperty(t,"_validationFunctions",{enumerable:!1,value:i})}return i}function Vn(e,t){return e.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase())}const Wn={enum(e,t){const n=t.enum;return null==n||null==n||n.indexOf(e)>-1?null:"enum"},minItems(e,t){const n=t.minItems;return null==n||null==n||isNaN(n)||e.length>=n?null:"minItems"},maxItems(e,t){const n=t.maxItems;return null==n||null==n||isNaN(n)||e.length<=n?null:"maxItems"},multipleOf(e,t){const n=t.multipleOf;return null==n||null==n||isNaN(n)||e%n!=0?null:"multipleOf"},maxLength(e,t){const n=t.maxLength;return null==n||null==n||isNaN(n)||e.length<=n?null:"maxLength"},minLength(e,t){const n=t.minLength;return null==n||null==n||isNaN(n)||e.length>=n?null:"minLength"},minimum(e,t){const n=t.minimum;return null==n||null==n||isNaN(n)||e>=n?null:"minimum"},exclusiveMinimum(e,t){const n=t.exclusiveMinimum;return null==n||null==n||isNaN(n)||e>n?null:"exclusiveMinimum"},maximum(e,t){const n=t.maximum;return null==n||null==n||isNaN(n)||e<=n?null:"maximum"},exclusiveMaximum(e,t){const n=t.exclusiveMaximum;return null==n||null==n||isNaN(n)||e<n?null:"exclusiveMaximum"},minimumString(e,t){const n=t.minimum;return n&&-1===Vn(e,n)?"minimum":null},exclusiveMinimumString(e,t){const n=t.exclusiveMinimum;return n&&1!==Vn(e,n)?"exclusiveMinimum":null},maximumString(e,t){const n=t.maximum;return n&&1===Vn(e,n)?"maximum":null},exclusiveMaximumString(e,t){const n=t.exclusiveMaximum;return n&&-1!==Vn(e,n)?"exclusiveMaximum":null},pattern(e,t){const n=t.pattern;return null==n||null==n||void 0!==n.flags&&(n.lastIndex=0,n.test(e))?null:"pattern"}};class Gn{constructor(){this.valid=!0,this.errors=[]}}const Un={};function Bn(e,t,n=!0,i){let r=null;if(t)if(Wt(t))r=t;else{let e="";if(e=Array.isArray(t)?t.join("\r\n"):t,n&&(r=Un["valid_"+e],void 0!==r))return r;e=`${zn(e)}`;let i="";e.indexOf("$value")>-1&&(i+="var $value=$obj.$model;\r\n"),e.indexOf("$result")>-1?i+=`var $result=null;\r\n${e}\r\nreturn $result;`:/(return[\s\"\!\'\(\;]|return$)/.test(e)?i+=e:i+=`return (${e})`,r=new Function("{"+Cn+"}",i),n&&(Un["valid_"+e]=r)}return r}function Zn(e){if(Wt(e))return e;let t="";if("string"==typeof e)t=`return (${e=zn(e)})`;else if(Array.isArray(e))for(const n of e)if("string"==typeof n)t+=zn(n)+"\r\n";else{let e=n.when||n.if||"true";e=zn(e);let i=n.value;void 0===i?i=e:"string"==typeof i&&(i=zn(i)),i.indexOf("$result")>-1?t+=`if (${e}) {${i}};\r\n`:-1==i.indexOf("return ")?t+=`if (${e}) return (${i});\r\n`:t+=`if (${e}) {${i}};\r\n`}return t.indexOf("$value")>-1&&(t=`var $value=$obj.$model;\r\n${t}`),t.indexOf("$result")>-1?t=`var $result=null;\r\n${t}\r\nreturn $result;`:-1==t.indexOf("return ")&&(t=`return (${t})`),new Function("{"+Cn+"}",t)}function qn(e){if(void 0!==e._anyCalc)return e._anyCalc;if(e.calc||e.summary||e.aggregate)return Object.defineProperty(e,"_anyCalc",{value:!0}),!0;if(e.properties)for(const t in e.properties){if(qn(e.properties[t]))return Object.defineProperty(e,"_anyCalc",{value:!0}),!0}else if(e.items)return qn(e.items);return Object.defineProperty(e,"_anyCalc",{value:!1}),!1}function Yn(e){return!!(e.$schema.disabled||e.$parent&&Yn(e.$parent))}function Hn(e,t,n,i){const r=e.$schema;for(let a=0;a<i.length;a++){const s=i[a];void 0!==t.schema[s]&&(typeof t.schema[s]!==n?Jn(e,s,t):r[s]=t.schema[s])}}function Jn(n,i,r,a){const s=r.schema,o=s[i],l=n.$schema;let c;delete l[i],r.calcCtx||ei(n,r),Wt(o)?(c=o,r.thisModel||(r.thisModel=ti(r))):(r.funcCache&&(void 0===s.__cache&&Object.defineProperty(s,"__cache",{value:{}}),c=s.__cache[`schema_${i}`]),void 0===c&&(c=Zn(o),r.funcCache&&(s.__cache[`schema_${i}`]=c)));const u=e((()=>{r.options._forceRecalc&&r.options._forceRecalc;try{return c.call(r.thisModel||r.parent,r.calcCtx)}catch(e){return void ai(n,`get schema.${i}`,e,o)}}));if(a){let e=null;const s=t((()=>{try{e=c.call(r.thisModel||r.parent,r.calcCtx),a(e)}catch(e){return void ai(n,`get schema.${i}`,e,o)}}),{flush:"post"});r.watchStops.push(s)}Object.defineProperty(l,i,{enumerable:!0,get:()=>u.value})}function Xn(e,t,n,i){const r=t.schema.warnings||{},a=e.$schema;for(let s=0;s<i.length;s++){const o=i[s];void 0!==r[o]&&(typeof r[o]!==n?Qn(e,o,t):a.warnings&&(a.warnings[o]=r[o]))}}function Qn(t,n,i,r){const a=i.schema,s=a.warnings[n],o=t.$schema;let l;o.warnings&&delete o.warnings[n],i.calcCtx||ei(t,i),Wt(s)?(l=s,i.thisModel||(i.thisModel=ti(i))):(i.funcCache&&(void 0===a.__cache&&Object.defineProperty(a,"__cache",{value:{}}),l=a.__cache[`schema_warnings_${n}`]),void 0===l&&(l=Zn(s),i.funcCache&&(a.__cache[`schema_warnings_${n}`]=l)));const c=e((()=>{try{return l.call(i.thisModel||i.parent,i.calcCtx)}catch(e){return void ai(t,`get schema.warnings.${n}`,e,s)}}));Object.defineProperty(o.warnings,n,{enumerable:!0,get:()=>c.value})}function ei(e,t){t.calcCtx||(t.calcCtx={}),t.options.external?t.calcCtx.$external=t.options.external:t.calcCtx.$external={},t.calcCtx.$methods=t.options.schemaMethods,t.calcCtx.$obj=e,t.calcCtx.$root=e.$root.$model;const n=e.$parent;return n&&n.$parent?(t.calcCtx.$parent=n.$parent.$model,n.$parent.$parent?(t.calcCtx.$parent2=n.$parent.$parent.$model,n.$parent.$parent.$parent?t.calcCtx.$parent3=n.$parent.$parent.$parent.$model:t.calcCtx.$parent3={}):t.calcCtx.$parent2=t.calcCtx.$parent3={}):t.calcCtx.$parent=t.calcCtx.$parent2=t.calcCtx.$parent3={},t.calcCtx}function ti(e){var t;if(!(null===(t=e.options)||void 0===t?void 0:t.simpleThis))return new Proxy(e.calcCtx,{get(t,n,i){switch(n){case"$root":return t.$root;case"$methods":return t.$methods;case"$external":return t.$external;case"$obj":return t.$obj;case"$parent":return t.$parent;case"$parent2":return t.$parent2;case"$parent3":return t.$parent3;case"$event":return t.$event;case"$value":return t.$value;case"$this":return e.parent}return Reflect.get(e.parent,n,i)},set:(t,n,i)=>(!n||"string"!=typeof n||!n.startsWith("$"))&&Reflect.set(e.parent,n,i)})}function ni(e,t,n){e.debounce?(e.debounceValue&&(e.debounceValue.value=t),clearTimeout(e.debounceTimer),e.debounceTimer=setTimeout((()=>{e.debounceValue&&(e.debounceValue.value=void 0),n()}),e.debounce)):n()}function ii(e){return e&&e._internal&&e._options&&e.$root}function ri(e,t){let n=(t=t||e.target)._internal.calcCtx;if(!t._options._anyEvent)return!1;!e.path&&t&&(e.path=t.$path);let i=!1;const r=t._internal;if(r.on){const a=r.on[e.type];if(a&&a.size){e.$obj=t;for(const r of a){n||(n=ei(t,t._internal)),n.$event=e;try{r.call(t._internal.thisModel||t._internal.parent||t.$model,e,n)}catch(n){ai(t,`run event: ${e.type}`,n,r)}i=!0}}}return t.$parent&&!e.stopPropagate&&ri(e,t.$parent)&&(i=!0),i}function ai(e,t,n,i){var r;null===(r=e._options)||void 0===r||r.logErrors}function si(e,t,n){var i;null===(i=e._options)||void 0===i||i.logWarnings}function oi(e,t,n,i,r,a){let s,o=n[i];if(void 0===o&&void 0!==e.default&&(o=e.default),e.calc?(void 0===e.cache&&(e.cache={}),s=e.cache.calcFunc,void 0===s&&(s=e.cache.calcFunc=In(e,!1))):e.aggregate&&(void 0===e.cache&&(e.cache={}),s=e.cache.aggregateFunc,void 0===s&&(s=e.cache.aggregateFunc=Pn(e,!1))),s){let n=t.$path;"string"==typeof i?n=n?n+"."+i:i:n+="["+i+"]";const l={$root:r.$root,$parent:a||{},$parent2:a&&a.$parent||{},$parent3:a&&a.$parent&&a.$parent.$parent||{},$external:r.external||{},$methods:r.schemaMethods||{},$obj:{$key:i,$path:n,$model:o}};let c;Wt(e.calc)&&(c=ti({options:{},parent:t,calcCtx:l}));try{o=s.call(c||t,l)}catch(e){}}return o}function li(e,t,n,i,r){const a=e.items,s=new Proxy(t,{get(e,t){if("$parent"===t)return i;if("$key"===t)return r;if(a){const r=oi(a,s,e,t,n,i);if(null!=r)switch(a.type){case"object":return ci(a,r,n,s,t);case"array":return li(a,r,n,s,t)}return r}}});return s}function ci(e,t,n,i,r){const a=e.properties,s=new Proxy(t,{get(e,t){if("$parent"===t)return i;if("$key"===t)return r;if("$path"===t){let e="";return i&&(e=i.$path),e?e+"."+r:r||""}if(a){const r=a[t];if(r){const a=oi(r,s,e,t,n,i);if(null!=a)switch(r.type){case"object":return ci(r,a,n,s,t);case"array":return li(r,a,n,s,t)}return a}}else;}});return void 0===n.$root&&(n.$root=s),s}function ui(e,t,n){const i=t.schema;t.needsCalcArgs=!0;const r=i[n];delete e[n],void 0===i.cache&&(i.cache={});let a=i.cache[`schema_${n}`];void 0===a&&(a=Zn(r),i.cache[`schema_${n}`]=a),Object.defineProperty(e,n,{enumerable:!0,get(){try{return a.apply(t.parentModel,t.calcargs)}catch(e){return}}})}function hi(e,t,n,i){for(const r of i)void 0!==t.schema[r]&&(typeof t.schema[r]!==n?ui(e,t,r):e[r]=t.schema[r])}function di(e,t,n="",i,r,a,s){let o=!1,l=!1;const c={},u={schema:e};let h=null;const d=(r,a,s)=>(h={path:n,validation:r,expected:void 0!==a?a:void 0===c[r]?e[r]:c[r],value:s||t},i.disableMessages||(h.message=En({options:i,schema:e},r,t,c)),i.errors.push(h),!!i.breakOnFirstError),p=Kn(e,e,!1);switch(e.type){case"integer":case"number":case"money":hi(c,u,"number",["minimum","maximum","exclusiveMaximum","exclusiveMinimum","precision"]);break;case"string":hi(c,u,"number",["maxLength","minLength"]),hi(c,u,"number",["minimum","maximum","exclusiveMaximum","exclusiveMinimum"]);break;case"array":hi(c,u,"number",["maxItems","minItems","length"])}void 0!==e.enum&&(Array.isArray(e.enum)?c.enum=e.enum:ui(c,u,"enum")),void 0===e.required||"object"===e.type||"string"!=typeof e.required&&"boolean"!=typeof e.required||(e.fieldRequired=e.required),hi(c,u,"boolean",["fieldRequired","disabled"]),hi(c,u,"string",["title","shortTitle","description"]);let f=null;if(e.validFunc){u.needsCalcArgs=!0,void 0===e.cache&&(e.cache={});let t=e.cache.schema_validFunc;void 0===t&&(t=Bn(0,e.validFunc,!1)),f=()=>{const e=t.apply(u.parentModel,u.calcargs);return!0===e||void 0===e?null:!1===e?"validFunc":e},p.push(f)}if(u.calcFunction=null,u.aggregateFunction=null,u.calcValue=void 0,i.validateCalculations)if(e.calc){u.validateCalculations=!0,u.needsCalcArgs=!0,void 0===e.cache&&(e.cache={});let t=e.cache.calcFunction;void 0===t&&(e.cache.calcFunction=t=In(e,!1)),u.calcFunction=t}else if(e.aggregate){u.validateCalculations=!0,u.needsCalcArgs=!0,void 0===e.cache&&(e.cache={});let t=e.cache.calcFunction;void 0===t&&(e.cache.aggregateFunction=t=Pn(e,!1)),u.aggregateFunction=t}const m={$key:a,$model:t,$parent:r};if(m.$root=null===r?m:r.$root,u.parent=s,u.needsCalcArgs){const e={$root:{},$parent:{},$parent2:{},$parent3:{},$external:i.external,$methods:i.schemaMethods,$obj:m};s?(e.$root=i.$rootProxy,s.$parent&&(e.$parent=s.$parent,s.$parent.$parent&&(e.$parent2=s.$parent.$model,s.$parent.$parent.$parent&&(e.$parent3=s.$parent.$parent.$model))),u.calcCtx=e,u.parentModel=s):(e.$root=m.$root.$model,r&&r.$parent&&(e.$parent=r.$parent.$model,r.$parent.$parent&&(e.$parent2=r.$parent.$parent.$model,r.$parent.$parent.$parent&&(e.$parent3=r.$parent.$parent.$parent.$model))),u.calcCtx=e,u.parentModel=r?r.$model:{})}if(!c.disabled){if(u.validateCalculations)if(u.calcFunction){let t=u.parentModel;Wt(e.calc)&&(t=ti({options:{},parent:u.parentModel,calcCtx:u.calcCtx})),u.calcValue=u.calcFunction.call(t||u.parentModel,u.calcCtx)}else u.aggregateFunction&&(u.calcValue=u.aggregateFunction.call(u.parentModel,u.calcCtx));if("number"===e.type||"money"===e.type){if(o=!0,c.fieldRequired&&null==t&&d("required"))return h;if(void 0!==t)if("number"!=typeof t){if(d("type",e.type,typeof t))return h}else l=!0}else if("int"===e.type||"integer"===e.type){if(o=!0,c.fieldRequired&&null==t&&d("required"))return h;if(void 0!==t)if("number"!=typeof t){if(d("type",e.type,typeof t))return h}else if(t%1!=0){if(d("type",e.type,"float"))return h}else l=!0}if(o){if(l){if(u.validateCalculations&&t!==u.calcValue&&d("calc",u.calcValue))return h;for(const e of p){const n=e(t,c);if(n&&d(n))return h}}}else if("string"===e.type){if(c.fieldRequired&&(null==t||""===t)&&d("required"))return h;if(void 0!==t)if("string"!=typeof t){if(d("type",e.type))return h}else{if(u.validateCalculations&&t!==u.calcValue&&d("calc",u.calcValue))return h;for(const e of p){const n=e(t,c);if(n&&d(n))return h}}}else if("boolean"===e.type){if(c.fieldRequired&&null==t&&d("required"))return h;if(void 0!==t)if(void 0!==t&&"boolean"!=typeof t){if(d("type",e.type,typeof t))return h}else{if(u.validateCalculations&&t!==u.calcValue&&d("calc",u.calcValue))return h;for(const e of p){const n=e(t,c);if(n&&d(n))return h}}}else if("array"===e.type){if(c.fieldRequired&&null==t&&d("required"))return h;if(void 0!==t)if(null==t||Array.isArray(t)){if(u.validateCalculations&&JSON.stringify(t)!==JSON.stringify(u.calcValue)&&d("calc",u.calcValue))return h;for(const e of p){const n=e(t,c);if(n&&d(n))return h}const e=c.length;if(void 0!==e&&null!==t&&t.length!==e&&d("length",e))return h}else if(d("type",e.type,typeof t))return h}else if("object"===e.type){if(c.fieldRequired&&null==t&&d("required"))return h;if(void 0!==t)if(null!==t&&"object"!=typeof t){if(d("type",e.type,typeof t))return h}else{if(u.validateCalculations&&JSON.stringify(t)!==JSON.stringify(u.calcValue)&&d("calc",u.calcValue))return h;for(const e of p){const n=e(t,c);if(n&&d(n))return h}}}}return h}function pi(e,t,n,i,r,a,s){const o={$key:a,$model:t,$parent:r,$parent2:r?r.$parent:{},$parent3:r&&r.$parent?r.$parent.$parent:{}};if(null===r?o.$root=o:(o.$root=r.$root,i.$rootProxy||(i.$rootProxy=s=function(e,t,n){return void 0===e.$parent&&(e=Array.isArray(e)?gt(e):gt([e])),ci(e,t,{external:n||{},schemaMethods:ht})}(i.$rootSchema,o.$root.$model,i.external))),s=s||i.$rootProxy,"object"===e.type){di(e,t,n,i,r,a,s);const l=e.required||[];if(e.properties&&t){const r=s?s[a]:null;for(const a in e.properties){const s=e.properties[a],c=t[a];l.indexOf(a)>-1&&void 0===s.fieldRequired&&(s.fieldRequired=!0),pi(s,c,""===n?a:n+"."+a,i,o,a,r)}}}else if("array"===e.type){di(e,t,n,i,r,a,s);const l=s?s[a]:null,c=e.items;if(c&&t){const e={$key:0,$model:null,$parent:o,$parent2:o.$parent,$parent3:o.$parent2,$root:o.$root};for(let r=0;r<t.length;r++)e.$key=r,e.$model=t[r],pi(c,t[r],n+"["+r+"]",i,e,r,l)}}else di(e,t,n,i,r,a,s)}function fi(e,t,n,i=""){const r={schemaMethods:ht,validateCalculations:!1,validationMessages:yt,warningMessages:yt,disableMessages:!1,breakOnFirstError:!0,errors:[],external:{},$rootProxy:null,$rootSchema:null};n&&bt(r,n),void 0===e.$parent&&(e=Array.isArray(e)?gt(e):gt([e])),e.$options&&(e.$options.validationMessages&&(r.validationMessages=Object.assign({},r.validationMessages,e.$options.validationMessages)),e.$options.warningMessages&&(r.warningMessages=Object.assign({},r.warningMessages,e.$options.warningMessages))),r.$rootSchema=e,r.$rootProxy=null,pi(e,t,i||"",r,null,null);const a=new Gn;return a.errors=r.errors,a.valid=0===a.errors.length,a}class mi{constructor(e){this.schema={},e&&this.init(e)}init(e){const t=[];if(Array.isArray(e))for(const n of e)"string"==typeof n?t.push(JSON.parse(n)):t.push(n);else"string"==typeof e?t.push(JSON.parse(e)):t.push(e);this.schema=gt(t)}defaultValue(e,t,n=!!vt.longGuids){const i=t?this.schemaValue(t):this.schema;return i?fn(i,e,void 0,{longGuids:n}):null}dataValue(e,t){return pn(this.schema,e,t)}schemaValue(e){return Sn(this.schema,e)}validate(e,t,n=null,i=""){const r=fi(n||this.schema,e,t,i||"");return r.errors.length&&(r.valid=!1),r}compareData(e,t,n){return cn(this.schema,e,t,n)}clearData(e,t){return ln(this.schema,e,t)}gdprData(e,t="***"){return Dn(this.schema,e,t)}setData(e,t,n,i){return mn(this.schema,e,t,n,0,i)}fixDateFormat(e){return kn(this.schema,e)}fixFormat(e){return kn(this.schema,e)}fixData(e,t=!0){return bn(this.schema,e,t)}flatPropsList(e=!1){return Mn(this.schema,e)}}const $i={};class gi{constructor(e,t,r,a,s,o,l,c){this._cache=n(),i(this),this.$key=r,this._dest=e,this._parent=t,this._schema=a,this._options=o,this._guidField=s,this._prevArray=l,this._prevIndex=c,o.wrapAll||"object"!==a.type?this._cache.value=this.$item:this._cache.value=null}get $item(){if(this._cache.value)return this._cache.value;{const e=new $i[this._schema.type]({dest:this._dest,parent:this._parent,propName:this.$key,schema:this._schema,options:this._options,prevModel:this._prevArray&&null!=this._prevIndex&&this._prevIndex>-1?this._prevArray[this._prevIndex]:void 0});return this._cache.value=e,e}}$clearCache(){return!!this._cache.value&&(this._cache.value.$destroy(),this._cache.value=void 0,!0)}$reset(){this._cache.value&&this._cache.value.$reset()}$dirtyList(e){return this._cache.value&&this._cache.value.$dirtyList(e),e}$destroy(){this.$clearCache()}$setKey(e){this.$key=e,this._cache.value&&this._cache.value.$changeKey(e)}beforePathChange(){this._cache.value&&this._cache.value.beforePathChange()}afterPathChange(){this._cache.value&&this._cache.value.afterPathChange()}get $model(){return this._parent[this.$key]}$removeRow(){this._dest.$removeRow(this.$key)}$remove(){this._dest.$removeRow(this.$key)}$moveUp(){this._dest.$moveUp(this.$key)}$moveDown(){this._dest.$moveDown(this.$key)}$clearRow(){this._dest.$clearRow(this.$key)}$clear(){this._dest.$clearRow(this.$key)}get $guid(){if(this._guidField)return this._parent[this.$key][this._guidField]}get $diffStatus(){return-100==this._prevIndex?"del":!this._prevArray||null!=this._prevIndex&&this._prevIndex>-1?"":"new"}}class yi{constructor(e){this.el=e,this.eventList={},this.watchList=[],this.hasFocus=!1}event(e,t){const n=this.eventList[e];void 0!==n&&(this.el.removeEventListener(e,n),delete this.eventList[e]),t&&(this.el.addEventListener(e,t),this.eventList[e]=t)}watch(e,t,n){const i=r(e,t,n?{immediate:!0}:void 0);return this.watchList.push(i),i}unbind(){for(const e in this.eventList)this.el.removeEventListener(e,this.eventList[e]);this.eventList={};for(const e of this.watchList)e();this.watchList=[]}}function vi(e,t,n,i=vt,r=""){if(!(e.computed||e.disabled&&(!0===e.disabled||i&&i._disabledFields&&i._disabledFields.has(r)))){if("object"===e.type){if("object"!=typeof t)return;if(null===t)return;const a={};let s=!1;const o=e.properties;if(o){const e=""===r?r:r+".";for(const r in o){const l=t[r],c=o[r];if(void 0!==l){const t=vi(c,l,n,i,e+r);void 0!==t&&(a[r]=t,s=!0)}}}return s?a:void 0}if("array"!==e.type){if(!Array.isArray(t)&&"object"!=typeof t&&null!==t&&Vt(e,t)){switch(e.type){case"boolean":if(!1===t)return;break;case"string":if(""===t)return}return t}}else if(Array.isArray(t)){const a=[],s=e.items;for(let e=0;e<t.length;e++){const o=vi(s,t[e],n,i,r+"["+e+"]");void 0!==o&&a.push(o)}if(0==a.length)return;return a}}}function bi(e,t,n,i,r=0,a=vt,s=""){if(i){"string"==typeof i&&"$"==(i=i.replace(/\[/g,".").replace(/\]/g,"").split(".").filter((e=>e)))[r=0]&&r++;const o=i[r];if(o){if("object"===e.type){const l=e.properties[o];if(void 0!==l){if("object"===l.type||"array"===l.type){let e=t[o];return void 0===e&&(e=fn(l,!0,void 0,a,s+"."+o),t[o]=e),bi(l,e,n,i,r+1,a,s+"."+o)}return gn(l,t,o,n)}return!1}if("array"===e.type){const l=e.items;if(void 0!==l){const e=parseInt(o,10);if(void 0===t[e])for(;t.length<e+1;)t.push(fn(l,!0,void 0,a,s+"["+t.length+"]"));return"array"===l.type||"object"===l.type?bi(l,t[e],n,i,r+1,a):gn(l,t,e,n)}return!1}return!1}}return"object"===e.type?wi(e,t,n,a,s):_i(e,t,n,a,s)}function _i(e,t,n,i=vt,r=""){if(void 0===n)return!1;if(void 0===(n=$n(e,n)))return!1;const a=e.items;let s=0;for(let e=0;e<n.length;e++){const o=t[s];let l;switch(a.type){case"object":l=o||fn(a,!0,void 0,i,r+"["+e+"]"),wi(a,l,n[e],i,r+"["+e+"]")&&(l!=o&&(t[s]=l),s++);break;case"array":l=o||fn(a,!0,void 0,i,r+"["+e+"]"),_i(a,l,n[e],i,r+"["+e+"]")&&(l!=o&&(t[s]=l),s++);break;default:gn(a,t,s,n[e])&&s++}}for(;t.length>s;)t.splice(t.length-1,1);return!0}function wi(e,t,n,i=vt,r=""){const a=e.properties;if(!a)return!1;if(void 0===(n=$n(e,n)))return!1;const s=r?r+".":r;for(const e in a){const r=a[e];let o=n&&n[e];const l=!(!r.calc||r.calc.when);switch(r.type){case"object":{let n=t[e];if(null==n&&(gn(r,t,e,fn(r,!0,void 0,i,s+e)||{}),n=t[e],!o))continue;if(!o){if(l)break;o=fn(r,!0,void 0,i,s+e)}wi(r,n,o,i,s+e)}break;case"array":{let n=t[e];if(null==n&&(t[e]=n=fn(r,!0,void 0,i,s+e),!o))continue;if(!o){if(l)break;o=fn(r,!0,void 0,i,s+e)}_i(r,n,o,i,s+e)}break;default:if(void 0===o){if(l&&void 0!==t[e])break;t[e]=fn(r,!0,void 0,i,s+e)}else gn(r,t,e,o)}}return!0}class xi{get $key(){return this.$parent&&this.$parent.$setLength&&this.$parent.$model,this._internal.key.value}set $key(e){this.$changeKey(e)}get $model(){return this._internal.parent[this._internal.key.value]}set $model(e){this._internal.parent[this._internal.key.value]=e}get $value(){return this._internal.debounceValue&&void 0!==this._internal.debounceValue.value?this._internal.debounceValue.value:this.getValue()}get $prevModel(){return this._internal.prevModel}get $prevValue(){if(void 0!==this._internal.prevModel)return this.getValue(this._internal.prevModel)}get $diffStatus(){if(this._options.prevModel){if(void 0===this._internal.prevModel)return"new";if(this._internal.prevModel!==this._internal.parent[this._internal.key.value])return"changed"}return""}set $value(e){this._options.logWarnings&&(this._internal.schema.calc&&!this._internal.schema.calc.when||this._internal.schema.aggregate)&&si(this),this._internal.debounce?ni(this._internal,e,(()=>{this.setValue(e)})):this.setValue(e)}get $form(){return this._internal.options.form}get $external(){return this._internal.options.external}set $external(e){a(e)?this._internal.options.external=e:this._internal.options.external=s(e)}get $data(){if(null===this._internal.vmUserData){const e=this._internal.schema.data?Object.assign({},this._internal.schema.data):{};this._internal.vmUserData=o(e)}return this._internal.vmUserData}get $error(){return this._options._readedErrorFields&&this._options._readedErrorFields.add(this),!this.$disabled&&this.$dirty?this.$validate():null}get $warnings(){return!this.$disabled&&this.$dirty?this.$check():[]}get $dirty(){return this.$getUserData("$dirty",this._options.startDirty)}set $dirty(e){var t;if(null===(t=this._options._anyEvent)||void 0===t?void 0:t.dirty){const t=this.$dirty;e!=t&&(this.$setUserData("$dirty",e),ri({target:this,type:"dirty",value:e,prevValue:t}))}else this.$setUserData("$dirty",e);e&&(this._options._userInput=!0)}get $path(){if(this.$parent){if("array"===this.$parent.$schema.type)return this.$parent.$path+"["+this.$key+"]";const e=this.$parent.$path;return e?e+"."+this.$key:this.$key.toString()}return""}get $langPath(){if(this.$parent){const e=this.$parent.$langPath;return"array"===this.$parent.$schema.type?e:e?e+"."+this.$key:this.$key.toString()}return this._options.langKeyPrefix||""}get $hasFocus(){return this.$getUserData("$focused",!1)}set $hasFocus(e){var t,n;if(e){if(null===(t=this._options._anyEvent)||void 0===t?void 0:t.focus){this.$hasFocus||(this.$setUserData("$focused",!0),ri({type:"focus",target:this,value:!0,prevValue:!1}))}else this.$setUserData("$focused",!0);this._internal.options.resetOnFocus&&this.$reset()}else{if(this._internal.debounce&&(this._internal.debounceValue&&void 0!==this._internal.debounceValue.value&&this.setValue(this._internal.debounceValue.value),clearTimeout(this._internal.debounceTimer)),null===(n=this._options._anyEvent)||void 0===n?void 0:n.blur){this.$hasFocus&&(this.$setUserData("$focused",!1),ri({type:"blur",target:this,value:!0,prevValue:!1}))}else this.$setUserData("$focused",!1);this.$disabled||this.$dirty||!this._options.dirtyOnBlur||(this.$dirty=!0)}}get $title(){let e=this.$schema.title;return this._options._i18n&&(e||void 0===this._options.langKeyPrefix||(e=this.$langPath),e)?this._options._i18n.value.t(e):e||""}get $shortTitle(){return void 0!==this.$schema.shortTitle?this._options._i18n?this._options._i18n.value.t(this.$schema.shortTitle):this.$schema.shortTitle:this.$title}get $description(){return this.$schema.description?this._options._i18n?this._options._i18n.value.t(this.$schema.description):this.$schema.description:""}get $enum(){return this.$schema.enum||[]}get $disabled(){return Yn(this)}get $enabled(){return!Yn(this)}get $readOnly(){if(this.$parent&&this.$parent.$readOnly)return!0;let e=this.$getUserData("readOnly",null);return null===e&&(e=this.$schema.readOnly),!!e}set $readOnly(e){this.$setUserData("readOnly",!!e||null)}get $csv(){return this._internal.schema.csv}get $isArrayItem(){return this.$parent&&this.$parent.$setLength&&"number"==typeof this._internal.key.value}get $arrayIndex(){return this.$isArrayItem?this._internal.key.value:this.$parent?this.$parent.$arrayIndex:-1}constructor(n,i){var a,s,o;this.$validateResult=null,this.$checkResult=[],this.$parent=n.dest;const u=this._options=n.options;n.key||("string"==typeof n.propName?n.key={value:n.propName}:n.key=l(n.propName)),n.vmUserData=null,n.mparent=null,n.watchStops=[],this._internal=n;const h=n.schema,d=n.dest,p=n.key.value,f=n.parent;("array"==h.type||d&&d._internal.funcCache)&&(n.funcCache=!0);const m=this;this.$root=d?d.$root:this;const $=this.$schema={type:h.type};if(void 0!==h.default&&(Wt(h.default)?Jn(this,"default",n):$.default=h.default),void 0===f[p]&&(Wt(h.default)?f[p]=$.default:f[p]=fn(h,!0,void 0,this._internal.options,this.$path)),n.mparent=f[p],Hn(this,n,"string",["title","shortTitle","description"]),i&&i(this._internal),h.$on&&!u.disableCalculations)for(const e in h.$on){let t="event",i=h.$on[e];if(Wt(i))if("beforeWrap"===e){const e=i;n.calcCtx||ei(this,n);const t=ti({options:n.options,parent:d?f:n.mparent,calcCtx:n.calcCtx});try{const i=e.call(t,{target:this,type:"beforeWrap",value:null,prevValue:null},n.calcCtx);void 0!==i&&this.$setData(i,void 0,!0)}catch(e){ai(this)}}else{const t=i;n.calcCtx||ei(this,n),n.thisModel||(n.thisModel=ti(n)),this.$on(e,t)}else{i.body&&(i.args&&(t=i.args.split(",")[0]),i=i.body);let r="";if(Array.isArray(i)?(i=i.join("\r\n"),r=zn(i)+"\r\n"):r=zn(i),"beforeWrap"===e){const e=new Function(t+",{"+Cn+"}",r);n.calcCtx||ei(this,n);try{const t=e.call(d?f:n.mparent,{target:this,type:"beforeWrap",value:null,prevValue:null},n.calcCtx);null!=t&&this.$setData(t,void 0,!0)}catch(e){ai(this)}}else{const n=new Function(t+",{"+Cn+"}",r);this.$on(e,n)}}}if(h.format&&($.format=h.format),void 0!==h.enum&&"object"!==h.type&&"array"!==h.type)if(m.$isArrayItem){if(!Array.isArray(h.enum)||"string"==typeof h.enum[0]&&"string"!=h.type)Jn(this,"enum",n,(e=>{if(e){const t=m.$model;void 0!==t&&-1===e.indexOf(t)&&c((()=>{m.$removeRow()}))}}));else{this.$schema.enum=h.enum;const e=m.$model;void 0!==e&&-1===(null===(a=this.$schema.enum)||void 0===a?void 0:a.indexOf(e))&&c((()=>{m.$removeRow()}))}{const e=r((()=>this.$model),(e=>{var t;void 0!==e&&-1===(null===(t=this.$schema.enum)||void 0===t?void 0:t.indexOf(e))&&m.$removeRow()}));this._internal.watchStops.push(e)}}else!Array.isArray(h.enum)||"string"==typeof h.enum[0]&&"string"!=h.type?Jn(this,"enum",n):this.$schema.enum=h.enum;if(h.debounce&&(this._internal.debounce=h.debounce,this._internal.debounceValue=l()),void 0===h.required||"object"===h.type||"string"!=typeof h.required&&"boolean"!=typeof h.required||(h.fieldRequired=h.required),Hn(this,n,"boolean",["fieldRequired"]),u.readOnly?$.readOnly=!0:Hn(this,n,"boolean",["readOnly"]),void 0!==n.schema.disabled){let e=!1;const t=t=>{if(t){let t;n.options._disabledFields||(n.options._disabledFields=new Set),n.options._disabledFields.add(this.$path),e=this.$data.$dirty,e&&(this.$dirty=!1),t="array"===h.type?h.default?Wt(h.default)?$.default:"number"==typeof h.default?[]:Array.from($.default):[]:Wt(h.default)?$.default:fn(h,!0,void 0,this._internal.options,this.$path),void 0===t?f[p]=void 0:this.$setData(t,void 0,!0)}else{n.options._disabledFields&&n.options._disabledFields.delete(this.$path),e&&(this.$dirty=e);const t=f[p];void 0===f[p]?(Wt(h.default)?f[p]=$.default:f[p]=fn(h,!0,void 0,this._internal.options,this.$path),this._internal.mparent=f[p]):"array"===h.type&&(void 0!==$.length?this.$setLength($.length):"number"!=typeof h.default||t&&0!==t.length||this.$setLength(h.default))}};"boolean"!=typeof n.schema.disabled?u.disableCalculations||(Jn(this,"disabled",n,(e=>{t(e)})),$.disabled&&t(!0)):(this.$schema.disabled=n.schema.disabled,n.schema.disabled&&t(!0))}if(!n.options.disableValidations&&h.validFunc){let e;n.calcCtx||ei(this,n),Wt(h.validFunc)?(e=h.validFunc,n.thisModel||(n.thisModel=ti(n))):e=Bn(0,h.validFunc,!0);let i=0;const r=l();let a=!0,s=!0;const o=t((()=>{const t=++i;try{n.calcCtx&&(n.calcCtx.$value=this.$model);const l=e.call(n.thisModel||f,n.calcCtx);if(s&&(a=!("object"==typeof(o=l)&&"function"==typeof o.then),s=!1),a)return r.value=!0===l||void 0===l?null:!1===l?"validFunc":l;Promise.resolve(l).then((e=>{if(t===i)return r.value=!0===e||void 0===e?null:!1===e?"validFunc":e}))}catch(e){ai(this,0,0,h.validFunc)}var o}));n.watchStops.push(o),Object.defineProperty($,"validFunc",{enumerable:!0,get:()=>r.value})}if(h.warnings&&(this.$schema.warnings={},Xn(this,n,"boolean",["fieldRequired"]),h.warnings.format&&(this.$schema.warnings.format=h.warnings.format),void 0!==h.warnings.enum&&"object"!==h.type&&"array"!==h.type&&(!Array.isArray(h.warnings.enum)||"string"==typeof h.warnings.enum[0]&&"string"!=h.type?Qn(this,"enum",n):this.$schema.warnings.enum=h.warnings.enum),!u.disableValidations&&h.warnings.validFunc)){let t;n.calcCtx||ei(this,n),Wt(h.warnings.validFunc)?(t=h.warnings.validFunc,n.thisModel||(n.thisModel=ti(n))):t=Bn(0,h.warnings.validFunc,!0);const i=e((()=>{n.calcCtx&&(n.calcCtx.$value=this.$model);const e=t.call(n.thisModel||f,n.calcCtx);return!0===e||void 0===e?null:!1===e?"validFunc":e}));Object.defineProperty($,"warningValidFunc",{enumerable:!0,get:()=>i.value})}if(!m._options.disableCalculations){if(h.calc){let e;n.calcCtx||ei(this,n),Wt(h.calc)?(e=h.calc,n.thisModel||(n.thisModel=ti(n))):e=In(h,n.funcCache);let t,i,a=0;if("object"===h.type||"array"===h.type){let e="return deepCopy(obj);";if("object"===h.type){const t=h.properties||{};e=Object.keys(t).map((e=>"array"===t[e].type||"object"===t[e].type?`obj.${e}===undefined ? undefined : deepCopy(obj.${e})`:`obj.${e}`)).join(",")}else"object"!==(null===(s=h.items)||void 0===s?void 0:s.type)&&"array"!==(null===(o=h.items)||void 0===o?void 0:o.type)&&(i=function(e){if(e)for(let t=0;t<e.length;t++)e[t]});i||(i=new Function("obj,deepCopy",e))}const l=r((()=>{if(a++,u._forceRecalc&&u._forceRecalc.value,m.$disabled)return t=void 0,a;try{t=e.call(n.thisModel||n.parent,n.calcCtx),u.logWarnings&&(void 0===t&&void 0===h.calc.when&&"string"==typeof h.calc&&-1===h.calc.indexOf("undefined")||"number"==typeof t&&isNaN(t))&&si(m,JSON.stringify(t),h.calc),!t||"object"!==h.type&&"array"!==h.type||i(t,he)}catch(e){ai(m,0,0,h.calc),t=void 0}return a}),(()=>{void 0!==t&&((m._options.startDirtyOnCalc||m._options._userInput)&&(!m._options.dirtyOnBlur&&!m._options.dirtyOnInput||m.$dirty||(m.$dirty=!0)),this._internal.debounce?ni(this._internal,t,(()=>{m.$setData(t,void 0,!0)})):m.$setData(t,void 0,!0))}),{immediate:!0});n.watchStops.push(l)}if(h.summary&&(h.aggregate={func:"sum",array:h.summary.array,property:h.summary.property,when:h.summary.when,if:h.summary.if,delay:h.summary.delay},delete h.summary),h.aggregate){n.calcCtx||ei(this,n);const e=Pn(h,n.funcCache);if(e){const t=()=>{if(u._forceRecalc&&u._forceRecalc.value,!m.$disabled)try{const t=e.call(f,n.calcCtx);return u.logWarnings&&(void 0===t||isNaN(t)&&"number"==typeof t)&&si(m,JSON.stringify(t),h.aggregate),t}catch(e){return void ai(m,0,0,h.aggregate)}},i=e=>{void 0!==e&&((m._options.startDirtyOnCalc||m._options._userInput)&&(m.$dirty||!m._options.dirtyOnBlur&&!m._options.dirtyOnInput||(m.$dirty=!0)),m.$setData(e,void 0,!0))};if(h.aggregate.delay)setTimeout((()=>{const e=r(t,i,{immediate:!0});n.watchStops.push(e)}),h.aggregate.delay);else{const e=r(t,i,{immediate:!0});n.watchStops.push(e)}}}}}$focus(e){e&&e.target&&(this._internal.targetElement=e.target),this.$hasFocus=!0}$blur(e){e&&e.target&&(this._internal.targetElement=e.target),this.$hasFocus=!1}$bind(e,t){var n;if("string"==typeof e){const t=document.querySelector(e);if(!t)return null;e=t}if("INPUT"===e.tagName||"TEXTAREA"===e.tagName){const t=new yi(e);let i=!1;switch(this.$schema.type){case"number":case"integer":case"money":i=!0}const r=this;if(t.event("focus",(e=>{t.hasFocus=!0,r.$focus(e)})),t.event("blur",(n=>{t.hasFocus=!1,i&&(e.value=this.$value),r.$blur(n)})),"INPUT"!==e.tagName||"checkbox"!=e.type&&"radio"!=e.type)t.event("input",(e=>{const t=e.target.value;this.$value=t})),t.watch((()=>this.$value),(n=>{i&&t.hasFocus||(e.value=n)}),!0);else{let a=e.value;if("boolean"==this.$schema.type){a="false"!==(a||"true");const n=!a;t.event("change",(()=>{r.$model=e.checked?a:n})),t.watch((()=>this.$model),(t=>{e.checked=t==a}),!0)}else if("array"==r.$schema.type){const i=(null===(n=this._internal.schema.items)||void 0===n?void 0:n.type)||"string";"integer"!=i&&"money"!=i&&"number"!=i||(a=parseFloat(a)),t.event("change",(()=>{let t=[];if(!!e.checked)r.$model&&(t=[...r.$model]),-1==t.indexOf(a)&&(t.push(a),r.$value=t);else{if(!r.$model)return;t=[...r.$model];const e=t.indexOf(a);e>-1&&(t.splice(e,1),r.$value=t)}})),t.watch((()=>this.$model.map((e=>e))),(t=>{e.checked=t&&t.indexOf(a)>-1}),!0)}else i&&(a=parseFloat(a)),t.event("change",(()=>{r.$model=e.checked?a:null})),t.watch((()=>this.$model),(t=>{e.checked=t===a}),!0)}return this._internal.mountedItems||(this._internal.mountedItems=[]),this._internal.mountedItems.push(t),t}{const n=t&&t.error?()=>this.$error:()=>this.$value;new yi(e).watch(n,(t=>{e.textContent=t}),!0)}return null}$unbind(e){var t;if(!e){if(this._internal.mountedItems){for(let e=this._internal.mountedItems.length-1;e>=0;e--)this.$unbind(this._internal.mountedItems[e]);return!0}return!1}let n;if(e instanceof yi?n=e:this._internal.mountedItems&&(n=this._internal.mountedItems.filter((t=>t.el==e))[0]),void 0!==n&&(n.unbind(),this._internal.mountedItems)){const e=null===(t=this._internal.mountedItems)||void 0===t?void 0:t.indexOf(n);return e>-1&&this._internal.mountedItems.splice(e,1),!0}return!1}$getUserData(e,t){const n=this.$data[e];return void 0===n?(void 0===t?this.$setUserData(e,null):this.$setUserData(e,t),this._internal.vmUserData[e]):n}$setUserData(e,t){this.$data[e]=t}$forceCalc(){return this._options.forceCalcEnabled&&this._options._forceRecalc?(this._options._forceRecalc.value++,c().then((()=>!0))):Promise.resolve(!1)}$destroy(){this._internal.debounceTimer&&(this._internal.debounceValue&&null!=this._internal.debounceValue.value&&this.$setData(this._internal.debounceValue.value,null,!0),clearTimeout(this._internal.debounceTimer));const e=this._internal.definitions;if(e)for(const t in e)e[t].$destroy();if(this._options._disabledFields&&this._options._disabledFields.delete(this.$path),this._internal.watchStops){for(let e=0;e<this._internal.watchStops.length;e++)this._internal.watchStops[e]();this._internal.watchStops=[]}u(this._internal.key)&&(this._internal.key={value:this._internal.key.value}),this._options._readedErrorFields&&this._options._readedErrorFields.delete(this),this.$unbind(),this._internal.onDestroy&&this._internal.onDestroy()}$reset(){this.$dirty=!1}$dirtyList(e){return void 0===e&&(e=[]),this.$schema.disabled||this.$dirty&&e.push(this),e}$setDirtyChild(e){let t=0;"string"==typeof e&&(e=[e]);for(let n=0;n<e.length;n++){const i=this.$child(e[n]);i&&(i.$dirty=!0,t++)}return t}$check(e,t,n){if(this._internal.schema.warnings&&!this.$disabled){void 0===e&&(e=this.$model),n=n||[],this.$checkResult=[];const t=Kn(this._internal.schema,this._internal.schema.warnings,!0);for(const i of t){const t=i(e,this.$schema.warnings);if(t){const i=Tn(this._internal,t,e,this.$schema);this.$checkResult.push({validation:t,message:i,expected:this.$schema.warnings[t]}),n.push(i)}}if(this.$schema&&this.$schema.warningValidFunc){const t=Tn(this._internal,this.$schema.warningValidFunc,e,this.$schema);this.$checkResult.push({validation:"validFunc",message:t,expected:this.$schema.warningValidFunc}),n.push(t)}return n}return this.$checkResult=[]}$checkAll(e,t){return void 0===t&&(t=[]),this.$check(void 0,e).length&&t.push(this),t}$validate(e,t){if(this.$disabled)return null;void 0===e&&(e=this.$model);const n=Kn(this._internal.schema,this._internal.schema,!0);for(const t of n){const n=t(e,this.$schema);if(n){const t=En(this._internal,n,e,this.$schema);return this.$validateResult={validation:n,message:t,expected:this.$schema[n]},t}}if(this._internal.schema.validFunc&&this.$schema&&this.$schema.validFunc){const t=En(this._internal,this.$schema.validFunc,e,this.$schema);return this.$validateResult={validation:"validFunc",message:t,expected:this.$schema.validFunc},t}return this.$validateResult=null}get $hasValidators(){return!!Kn(this._internal.schema,this._internal.schema,!0).length||(!!this.$schema.fieldRequired||!!this._internal.schema.validFunc)}$validateAll(e,t){return void 0===t&&(t=[]),this.$validate(void 0,e)&&t.push(this),t}$setDefault(){const e=this._internal.schema,t=fn(e,!0,void 0,this._internal.options,this.$path);return this.$setData(t,void 0,!0),"array"===e.type&&void 0!==this.$schema.length&&"number"!=typeof e.length&&this.$setLength(this.$schema.length),!0}$setData(e,t,n){var i,r,a;if(t)return mn(this._internal.schema,this.$model,e,t,0,n,this._options,this.$path);if(null===(i=this._options._anyEvent)||void 0===i?void 0:i.beforeChange){const t={type:"beforeChange",target:this,value:e,prevValue:this.$model};ri(t)&&t.value!==e&&(e=t.value)}if(null===(r=this._options._anyEvent)||void 0===r?void 0:r.beforeChange){const t=this.$model;if(e!==t){const n={type:"beforeChange",target:this,value:e,prevValue:t};ri(n)&&n.value!==e&&(e=n.value)}}if(null===(a=this._options._anyEvent)||void 0===a?void 0:a.change){const t=this.$model;if(gn(this.$schema,this._internal.parent,this.$key,e)){if(t!==e){const n={type:"change",target:this,value:e,prevValue:t};ri(n),e!==n.value&&gn(this.$schema,this._internal.parent,this.$key,n.value)}return!0}return!1}return gn(this.$schema,this._internal.parent,this.$key,e)}$setNewData(e,t){return t?bi(this._internal.schema,this.$model,e,t,0,this._internal.options):gn(this.$schema,this._internal.parent,this.$key,void 0===e?fn(this._internal.schema,!0,null,this._internal.options,this.$path):e)}$getData(e,t){if(t){const n=this.$child(t);return n?n.$getData(e):void 0}return ln(this._internal.schema,this.$model,!1!==e,this._options,this.$path)}$getDataJson(e,t){return JSON.stringify(this.$getData(e,t))}$clearDataDefaults(e){if(e){const t=this.$child(e);return t?t.$clearDataDefaults():void 0}return vi(this._internal.schema,this.$model,!0,this._options,this.$path)}$getInvalidValues(e=[]){return e}$setInvalidValues(e){}$child(e,t=!1){if(!e)return this;let n="";const i=e.indexOf(".");if(i>-1&&(n=e.substring(i+1),e=e.substring(0,i)),"$"===e)return this.$root.$child(n,t);const r=e.indexOf("[");switch(this._internal.schema.type){case"object":if(r>-1){const i=this[e.substring(0,r)];if(i)return i.$child(e.substring(r)+"."+n,t)}else{const i=this[e];if(i)return i.$child(n,t)}break;case"array":if(r>-1){const i=e.substring(r+1,e.indexOf("]",r));let a=+i;if(isNaN(a)&&(a=this.$model.findIndex((e=>e.guid==i)),-1==a))return;if(a>=this.$items.length&&t)for(;this.$items.length<=a;)this.$addRow();const s=this.$items[a];if(s)return s.$item.$child(n,t)}}}get $fields(){return{}}beforePathChange(){this.$schema.disabled&&this._options._disabledFields&&this._options._disabledFields.delete(this.$path)}afterPathChange(){this.$schema.disabled&&(this._options._disabledFields||(this._options._disabledFields=new Set),this._options._disabledFields.add(this.$path))}$changeKey(e){this.beforePathChange(),this._internal.key.value=e,this._internal.mparent=this._internal.parent[e],this.afterPathChange()}get $parent2(){return this.$parent?this.$parent.$parent:null}get $parent3(){return this.$parent2?this.$parent2.$parent:null}$removeRow(e){return!!this.$isArrayItem&&(void 0!==e?this.$parent.$removeRow(e):this.$parent.$removeRow(this.$key))}$moveUp(e){return!!this.$isArrayItem&&(void 0!==e?this.$parent.$moveUp(e):this.$parent.$moveUp(this.$key))}$moveDown(e){return!!this.$isArrayItem&&(void 0!==e?this.$parent.$moveDown(e):this.$parent.$moveDown(this.$key))}$clearRow(e){return!!this.$isArrayItem&&(void 0!==e?this.$parent.$clearRow(e):this.$parent.$clearRow(this.$key))}$fixDateFormat(){return 0}getValue(e){return null!=e?e:this.$model}setValue(e){var t;if(this.$schema.disabled||(!this.$dirty&&this._internal.options.dirtyOnInput&&(this.$dirty=!0),this._options._userInput=!0),null===(t=this._options._anyEvent)||void 0===t?void 0:t.change){let t=this.$model;(Array.isArray(t)||Gt(t))&&(t=he(t)),this.$model=e,ri({type:"change",target:this,value:e,prevValue:t})}else this.$model=e}get $definitions(){if(this._internal.definitions)return this._internal.definitions;let e=null;if(this._internal.schema.definitions){e={};const t=this;for(const n in this._internal.schema.definitions){const i=this._internal.schema.definitions[n];let r=null;Object.defineProperty(e,n,{get:()=>r||(r=new $i[i.type||"string"]({dest:t,parent:{},propName:n,schema:i,options:t._internal.options}))})}}return this._internal.definitions=e}$startRegisterErrorProps(){return this._options._readedErrorFields=new Set,!0}$getErrorProps(){var e;return null!==(e=this._options._readedErrorFields)&&void 0!==e?e:new Set}$stopRegisterErrorProps(){const e=this.$getErrorProps();return this._options._readedErrorFields=void 0,e}$traverseFirst(e,t){if((t||!this.$schema.disabled)&&e(this))return this}$changeLanguage(e,t){if(this._options._lang){if(this._options._lang.value=te(e),!t&&this._options._i18n){const t=this._options._i18n.value;if(t&&t.language!==e){const n=t.instance;n.changeLanguage(e),this._options._i18n.value={t:n.t,language:e,instance:n}}}return!0}return!1}$setExternal(e){this._options.external&&Gt(this._options.external)&&a(this._options.external)&&Gt(e)?Object.assign(this._options.external,e):this._options.external=e}get $anyError(){let e=!1;return this.$traverseFirst((t=>{if(!t.$schema.disabled&&t.$dirty&&t.$validate(void 0,!0))return e=!0,!0})),e}get $anyWarning(){const e=[];let t=!1;return this.$traverseFirst((n=>{if(!n.$schema.disabled&&n.$dirty&&n.$check(void 0,!0,e).length)return t=!0,!0})),t}$on(e,t){return function(e,t,n){const i=e._internal;return i.on||(i.on={}),i.on[t]||(i.on[t]=new Set),i.on[t].add(n),e._options._anyEvent[t]=!0,!0}(this,e,t)}$off(e,t){return function(e,t,n){const i=e._internal;return!!i.on&&(t?!!i.on[t]&&(n?i.on[t].delete(n):(i.on[t].clear(),delete i.on[t],!0)):(i.on=void 0,!0))}(this,e,t)}toString(){return this.$parent?"$."+this.$path:"$"}}function ki(e,t,n,i){const r=new gi(e,t.parent[t.key.value],i,n,t.guidField,t.options);return t.ntable.push(r),r}function Fi(e,t=0){for(let n=t;n<e.ntable.length;n++)e.ntable[n].$clearCache()}function Mi(e,t){const n=e.$model;if(!n)return t.ntable.length&&(Fi(t),t.ntable.length=0),t.ntable;const i=n.length;if(i>t.ntable.length)for(;t.ntable.length<i;)bn(t.schitems,n[t.ntable.length],!1,t.options),ki(e,t,t.schitems,t.ntable.length);else i<t.ntable.length&&(Fi(t,i),t.ntable.length=i);return t.ntable}function Di(e,t){for(let e=0;e<t.ntable.length;e++)Fi(t,e);t.ntable.length=0;const n=t.mparent.length,i=t.prevModel,r={length:0};for(let a=0;a<n;a++){let n=-1;if(i){if(t.guidField){const e=t.mparent[a][t.guidField];e&&(n=i.findIndex((n=>n[t.guidField]===e)))}else a<i.length&&(n=a);n>-1&&(r[""+n]=!0,r.length++)}t.ntable[a]=new gi(e,t.mparent,a,t.schitems,t.guidField,t.options,i,n)}if(i&&r.length<i.length){let n=t.ntable.length;for(let a=0;a<i.length;a++)r[a]||(t.ntable[n++]=new gi(e,i,a,t.schitems,t.guidField,t.options,i,-100))}}$i.array=class extends xi{constructor(e){var t,n,i,a,s,l;let c=0;const u=e.schema,h=e.options,d=e.propName,p=e.parent;super(e,(e=>{e.schitems=u.items,e.cachedKey="",e.cachedItems=[],c=e.mparent.length,e.ntable=o({table:[]}).table}));const f=this._internal;if(f.guidField="","object"==(null===(t=u.items)||void 0===t?void 0:t.type))if(null===(i=null===(n=u.items)||void 0===n?void 0:n.properties)||void 0===i?void 0:i.guid)f.guidField="guid";else for(const e in null===(a=u.items)||void 0===a?void 0:a.properties)if("string"===(null===(s=u.items)||void 0===s?void 0:s.properties[e].type)&&"guid"===(null===(l=u.items)||void 0===l?void 0:l.properties[e].format)){f.guidField=e;break}let m;Di(this,f),Hn(this,f,"number",["maxItems","minItems"]),this.$schema.warnings&&Xn(this,f,"number",["maxItems","minItems"]),void 0!==u.length&&("number"!=typeof u.length?Jn(this,"length",f,(e=>this.$setLength(e))):m=u.length);const $=this,g=r((()=>p[d]?p[d].length:0),(()=>{u.debug,$.$disabled||($.$dirty=!0),$._internal.prevModel?Di(this,this._internal):Mi(this,this._internal)}));if(f.watchStops.push(g),c&&!$._options.disableCalculations&&!$._options.wrapAll){const t=qn(f.schitems),n=f.schitems.properties;if(t&&n){const t={$root:this.$root.$model,$parent:f.mparent,$parent2:{},$parent3:{},$external:h.external,$methods:h.schemaMethods,$obj:{}};e.dest&&(t.$parent2=e.dest.$model,e.dest.$parent&&(t.$parent3=e.dest.$parent.$model));for(const e of Object.keys(n)){const i=n[e];if(i.calc){let n,r,a;Wt(i.calc)?(r={options:f.options,parent:{},calcCtx:t},n=ti(r),a=i.calc):a=In(i,!0);const s={$parent:$,$key:0};t.$obj={$key:e,$parent:s,$parent2:$,$parent3:$.$parent,$arrayIndex:0,_options:h};const o=$.$path;for(;s.$key<c;s.$key++){t.$obj.$path=o+"["+s.$key+"]."+e,t.$obj.$arrayIndex=s.$key,r&&(r.parent=f.mparent[s.$key]);try{const i=a.call(n||f.mparent[s.$key],t);void 0!==i&&(f.mparent[s.$key][e]=i)}catch(e){t.$obj.toString=()=>"$."+t.$obj.$path,ai(t.$obj,0,0,i.calc)}}}else if(i.aggregate){const n=Pn(i,!0);if(n){const r={$parent:$,$key:0};for(t.$obj={$key:e,$parent:r,$parent2:$,$parent3:$.$parent,_options:h};r.$key<c;r.$key++)try{const i=n.call(f.mparent[r.$key],t);f.mparent[r.$key][e]=i}catch(e){t.$obj.toString=()=>"$."+t.$obj.$path,ai(t.$obj,0,0,i.aggregate)}}}}}}void 0!==m&&(this.$schema.length=m,this.$setLength(m))}setValue(e){var t,n,i;if(Array.isArray(e)){const r=(null===(t=this.$items[0])||void 0===t?void 0:t.$item.$schema.enum)||(null===(i=null===(n=this._internal.schema)||void 0===n?void 0:n.items)||void 0===i?void 0:i.enum);if(r&&Array.isArray(r)){const t=[...e];for(let e=t.length-1;e>=0;e--)-1==r.indexOf(t[e])&&t.splice(e,1);e=t}}super.setValue(e)}$validate(e,t){return this.$disabled?null:(void 0===e&&(e=this.$model),t||(this.$dirty=!0),null==e?this.$schema.fieldRequired?En(this._internal,"required",e,this.$schema):null:super.$validate(e))}$validateAll(e,t){void 0===t&&(t=[]),null!==this.$validate(void 0,e)&&t.push(this);for(let n=0;n<this._internal.ntable.length;n++)this._internal.ntable[n].$item.$validateAll(e,t);return t}$check(e,t,n){return this.$schema.warnings&&!this.$disabled?(void 0===e&&(e=this.$model),this.$dirty=!0,n=n||[],null==e?(this.$schema.warnings.fieldRequired&&n.push(Tn(this._internal,"required",e,this.$schema)),n):super.$check(e,t,n)):this.$checkResult=[]}$checkAll(e,t){void 0===t&&(t=[]),this.$check(void 0,e).length&&t.push(this);for(let n=0;n<this._internal.ntable.length;n++)this._internal.ntable[n].$item.$checkAll(e,t);return t}$setData(e,t,n){var i,r;let a=!1;if(t)a=mn(this._internal.schema,this.$model,e,t,0,n,this._internal.options,this.$path);else{let s;if(null===(i=this._options._anyEvent)||void 0===i?void 0:i.beforeChange){void 0===s&&(s=he(this.$model));const t={type:"beforeChange",target:this,value:e,prevValue:s};ri(t)&&(e=t.value)}(null===(r=this._options._anyEvent)||void 0===r?void 0:r.change)?(void 0===s&&(s=he(this.$model)),mn(this._internal.schema,this.$model,e,t,0,n,this._internal.options,this.$path)?(ri({type:"change",target:this,value:e,prevValue:s}),a=!0):a=!1):a=mn(this._internal.schema,this.$model,e,t,0,n,this._internal.options,this.$path)}return Mi(this,this._internal),a}$setNewData(e,t){const n=bi(this._internal.schema,this.$model,e,t,0,this._internal.options);return void 0!==this.$schema.length&&"number"!=typeof this._internal.schema.length&&this.$setLength(this.$schema.length),Mi(this,this._internal),n}get $diffStatus(){return void 0===this._internal.prevModel?"new":this._internal.prevModel.length!==this._internal.parent[this._internal.key.value].length?"changed":""}$getInvalidValues(e=[]){for(let t=0;t<this._internal.ntable.length;t++){const n=this._internal.ntable[t];n._cache.value&&n._cache.value.$getInvalidValues(e)}return e}$setInvalidValues(e){for(let t=0;t<e.length;t++){const n=this.$child(e[t].$path,!0);n&&(n.$value=e[t].$value)}}$reset(){for(let e=0;e<this._internal.ntable.length;e++)this._internal.ntable[e].$reset();super.$reset()}$dirtyList(e){if(void 0===e&&(e=[]),this.$schema.disabled)return e;this.$dirty&&e.push(this);for(let t=0;t<this._internal.ntable.length;t++)this._internal.ntable[t].$dirtyList(e);return e}$traverseFirst(e,t){if(t){if(e(this))return this;for(let n=0;n<this._internal.ntable.length;n++){const i=this._internal.ntable[n].$item.$traverseFirst(e,!!t);if(i)return i}}else{if(this.$schema.disabled)return;if(e(this))return this;for(let n=0;n<this._internal.ntable.length;n++){const i=this._internal.ntable[n];if(i._cache.value){const n=i._cache.value.$traverseFirst(e,!!t);if(n)return n}}}}$fixDateFormat(){return kn(this._internal.schema,this.$model)}$fixFormat(){return kn(this._internal.schema,this.$model)}get $items(){return this._internal.items?this._internal.items.value:this._internal.ntable}$setLength(e){if(this.$disabled)return!1;if(null!=e&&"number"==typeof e&&!isNaN(e)&&e>=0){const t=this.$model;if(t){if(t.length!==e){for(;t.length>e&&this.$removeRow(t.length-1););for(;t.length<e&&this.$addRow(void 0,e-t.length););}return t.length===e}}return!1}$addRow(e,t=1){var n,i;if(this.$disabled)return!1;let r=this.$model;if(void 0===r){const e=fn(this._internal.schema,!0,void 0,this._internal.options,this.$path);this.$setData(e),r=this.$model}if(r){if(void 0!==this.$schema.length&&r.length===this.$schema.length)return!1;this._internal.cachedKey="";const a=r.length,s=this._internal.schitems,o=this.$path;let l;if("object"===s.type)for(let n=0;n<t;n++)l=fn(s,!0,void 0,this._internal.options,o+"["+(a+n)+"]"),e&&(l=Object.assign(l,e)),r.push(l);else for(let n=0;n<t;n++)l=void 0!==e?e:fn(s,!0,void 0,this._internal.options,o+"["+(a+n)+"]"),r[a+n]=l;if(this._internal.prevModel)Di(this,this._internal),(null===(n=this._options._anyEvent)||void 0===n?void 0:n.addRow)&&ri({type:"addRow",target:this,value:a+t,prevValue:r[a+t]});else for(let e=0;e<t;e++)ki(this,this._internal,s,a+e),(null===(i=this._options._anyEvent)||void 0===i?void 0:i.addRow)&&ri({type:"addRow",target:this,value:a+e,prevValue:r[a+e]})}return this._internal.vmUserData&&void 0!==this._internal.vmUserData.$pageNumber&&(this.$pageNumber=this.$pageCount-1),!0}$removeRow(e){var t;if(this.$disabled)return!1;const n=this.$model;if(void 0!==this.$schema.length&&n&&n.length===this.$schema.length)return!1;if(void 0===e&&(e=this._internal.ntable.length-1),e<0||e>=this._internal.ntable.length)return!1;if(this._internal.prevModel&&"del"==this._internal.ntable[e].$diffStatus)return!1;this._internal.cachedKey="",(null===(t=this._options._anyEvent)||void 0===t?void 0:t.removeRow)&&ri({type:"removeRow",target:this,value:e});const i=this._internal.ntable.splice(e,1),r=this._internal.ntable.length;for(let t=e;t<r;t++)this._internal.ntable[t].$setKey(t);return i[0].$clearCache(),n&&n.splice(e,1),!0}$clearRow(e){if(this.$disabled)return!1;void 0===e&&(e=this._internal.ntable.length-1);const t=fn(this._internal.schitems,!1,null,this._internal.options,this.$path+"["+e+"]");return this._internal.ntable[e].$clearCache(),this.$model&&t&&(this.$model[e]=t),!0}$exchangeRow(e,t){var n;if(this.$disabled)return!1;this._internal.cachedKey="";const i=this.$model;if(i){const r=i[e],a=i[t],s=this._internal.ntable[e]._cache.value,o=s?s.$dirtyList().map((e=>e.$path.substring(s.$path.length+1))):[];this._internal.ntable[e].$clearCache();const l=this._internal.ntable[t]._cache.value,c=l?l.$dirtyList().map((e=>e.$path.substring(l.$path.length+1))):[];if(this._internal.ntable[t].$clearCache(),(null===(n=this._options._anyEvent)||void 0===n?void 0:n.exchangeRow)&&ri({type:"exchangeRow",target:this,value:t,prevValue:e}),i[e]=a,i[t]=r,s){this._internal.ntable[t].$item.$setDirtyChild(o)}if(l){this._internal.ntable[e].$item.$setDirtyChild(c)}if(this._internal.vmUserData&&void 0!==this._internal.vmUserData.$pageNumber){const e=Math.floor(t/this.$pageSize);e!=this.$pageNumber&&(this.$pageNumber=e)}}return!0}$moveUp(e){return!this.$disabled&&(void 0===e&&(e=this._internal.ntable.length-1),e>0&&this.$exchangeRow(e,e-1))}$moveDown(e){return!this.$disabled&&(void 0===e&&(e=0),!!(this.$model&&e<this.$model.length-1)&&this.$exchangeRow(e,e+1))}$sort(e="",t=!1){if(this.$disabled)return;this._internal.cachedKey="";let n=-1,i=1;t&&(n=1,i=-1),this._internal.mparent=e?this._internal.mparent.sort(((t,r)=>r[e]===t[e]?0:r[e]>t[e]?n:i)):this._internal.mparent.sort(((e,t)=>t===e?0:t>e?n:i));let r=this._internal.ntable.length;for(;r--;)this._internal.ntable[r].$clearCache()}$filter(e){return e?this._internal.ntable.filter(e):this._internal.ntable}$setDisinctValue(e){const t=this.$model;if(t&&t.indexOf(e)>-1)return!1;const n=[...t,e];return this.setValue(n),!0}get pageNumber(){return this.$pageNumber}get $pageNumber(){return this.$getUserData("$pageNumber",0)}set pageNumber(e){this.$pageNumber=e}set $pageNumber(e){e<0?this.$setUserData("$pageNumber",0):e>=this.$pageCount?(si(this,this.$pageCount),this.$setUserData("$pageNumber",this.$pageCount-1)):this.$setUserData("$pageNumber",e)}get pageSize(){return this.$pageSize}get $pageSize(){return this.$getUserData("$pageSize",25)}set pageSize(e){this.$pageSize=e}set $pageSize(e){this.$setUserData("$pageSize",e),this.pageNumber>=this.pageCount&&(this.pageNumber=this.pageCount-1)}get pageCount(){return this.$pageCount}get $pageCount(){return this.$schema.disabled||!this.$model?0:Math.ceil(this.$model.length/this.$pageSize)}get order(){return this.$order}get $order(){return this.$getUserData("$order","")}set order(e){this.$order=e}set $order(e){this.$setUserData("$order",e)}$getItems(e,t,n){const i=this.$model;if(!i)return[];e=e||0;let r=t;void 0===r?r=i.length:(r+=e,r>=i.length&&(r=i.length));let a=[];const s=`${e}|${r}|${n}`;if(s===this._internal.cachedKey)return this._internal.cachedItems;if(n){const t=Array.from(this._internal.ntable);let s=n,o=-1;s.endsWith(" desc")&&(s=s.substring(0,n.length-5),o=1),s.startsWith("-")&&(s=s.substring(1),o=1),t.sort(((e,t)=>i[t.$key][s]===i[e.$key][s]?0:i[t.$key][s]>i[e.$key][s]?o:-o)),a=t.slice(e,r).map((e=>e.$item))}else a=this._internal.ntable.slice(e,r).map((e=>e.$item));return this._internal.cachedItems=a,this._internal.cachedKey=s,a}$getPage(e,t,n){return null==e&&(e=this.$pageNumber),null==t&&(t=this.$pageSize),null==n&&(n=this.$order),this.$getItems(e*t,t,n)}$destroy(){Fi(this._internal),super.$destroy()}$fieldTitle(e){return this.$tableField(e,(e=>e.$title))}$tableField(e,t){let n;if(this.$items.length)delete this._internal._cachedSubItems,n="object"==this._internal.schema.items.type&&e?"string"==typeof e?this.$items[0].$item[e]:e(this.$items[0].$item):this.$items[0].$item;else if(this._internal.schema.items){let t=this._internal._cachedSubItems;if(!t){const e=this._internal.schema.items.type||"object";t=new $i[e]({dest:this,parent:[],propName:0,schema:this._internal.schema.items,options:Object.assign({},this._options,{disableCalculations:!0,wrapAll:!1,disableValidations:!0})}),this._internal._cachedSubItems=t}n=e?"string"==typeof e?t[e]:e(t):t}return t&&n?Wt(t)?t(n):n[t]:n}beforePathChange(){super.beforePathChange();for(let e=0;e<this._internal.ntable.length;e++)this._internal.ntable[e].beforePathChange()}afterPathChange(){for(let e=0;e<this._internal.ntable.length;e++)this._internal.ntable[e].afterPathChange();super.afterPathChange()}};function Si(e,t,n,i){const r=n.schemaprops[e],a=n.schema.required||[];let s=n.mparent;void 0===r.fieldRequired&&a.indexOf(e)>-1&&(r.fieldRequired=!0);const o=r.type||(r.type=(r.properties?"object":r.items&&"array")||"string"),l=null===t.$parent;if(i.wrapAll&&(n.cacheProp[e]=new $i[o]({dest:t,parent:s,prevModel:n.prevModel?n.prevModel[e]:void 0,propName:e,schema:r,options:i})),i.wrapAll&&!l){const i=t[e]=n.cacheProp[e];t.$data.$dirty&&!i.$disabled&&(i.$dirty=!0)}else if(Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get(){let a=n.cacheProp[e];if(null===(s=t.$model)){if(a&&(a.$destroy(),delete n.cacheProp[e],null===this.$parent)){const e=t.$visitedProps.indexOf(a);e>-1&&(t.$visitedProps=t.$visitedProps.splice(e,1))}return null}if(void 0===a&&(a=n.cacheProp[e]=new $i[o]({dest:t,parent:s,prevModel:n.prevModel?n.prevModel[e]:void 0,propName:e,schema:r,options:i}),t.$data.$dirty&&!a.$disabled&&(a.$dirty=!0)),l){-1==t.$visitedProps.indexOf(a)&&t.$visitedProps.push(a)}return a}}),s&&void 0===n.cacheProp[e]&&("array"===o||void 0===s[e]||qn(r))){const a=n.cacheProp[e]=new $i[o]({dest:t,parent:s,prevModel:n.prevModel?n.prevModel[e]:void 0,propName:e,schema:r,options:i});t.$dirty&&!a.$disabled&&(a.$dirty=!0)}}$i.object=class extends xi{constructor(e){super(e,(t=>{t.schemaprops=e.schema.properties,t.cacheProp={}})),this.$visitedProps=[];const t=this._internal;let n=t.mparent;if(t.schemaprops){if(void 0===n){const i=fn(e.schema,!0,void 0,this._internal.options,this.$path);e.parent[e.propName]=i,t.mparent=n=e.parent[e.propName]}!function(e,t,n){for(const i in t.schemaprops)Si(i,e,t,n)}(this,t,t.options)}}$setData(e,t,n){var i,r;if(t)return mn(this._internal.schema,this.$model,e,t,0,n,this._options,this.$path);{let a;if(null===(i=this._options._anyEvent)||void 0===i?void 0:i.beforeChange){void 0===a&&(a=he(this.$model));const t={type:"beforeChange",target:this,value:e,prevValue:a};ri(t)&&(e=t.value)}return(null===(r=this._options._anyEvent)||void 0===r?void 0:r.change)?(void 0===a&&(a=he(this.$model)),!!mn(this._internal.schema,this.$model,e,t,0,n,this._options,this.$path)&&(ri({type:"change",target:this,value:e,prevValue:a}),!0)):mn(this._internal.schema,this.$model,e,t,0,n,this._options,this.$path)}}$setNewData(e,t){return bi(this._internal.schema,this.$model,e,t,0,this._options,this.$path)}get $diffStatus(){return void 0===this._internal.prevModel?"new":""}$getInvalidValues(e=[]){if(this._internal.cacheProp)for(const t in this._internal.cacheProp){this._internal.cacheProp[t].$getInvalidValues(e)}return e}$setInvalidValues(e){for(let t=0;t<e.length;t++){const n=this.$child(e[t].$path,!0);n&&(n.$value=e[t].$value,n.$dirty=!0)}}$validate(e,t){if(this.$disabled)return null;if(t||(this.$dirty=!0),void 0===e&&(e=this.$model),null===e){if(this.$schema.fieldRequired){const t=En(this._internal,"required",e,this.$schema);return this.$validateResult={validation:"required",message:t,expected:!0},t}return null}return null}$validateAll(e,t){if(void 0===t&&(t=[]),this.$disabled)return t;null!==this.$validate(void 0,e)&&t.push(this),e||(this.$dirty=!0);for(const n in this._internal.schemaprops){const i=this[n];i&&i.$validateAll(e,t)}return t}$check(e,t){return this.$disabled||(t||(this.$dirty=!0),this.$parent||(this._internal.options.startDirty=!0)),this.$checkResult=[]}$checkAll(e,t){if(this.$disabled)return[];void 0===t&&(t=[]),e||(this.$dirty=!0);for(const n in this._internal.schemaprops)this[n]&&this[n].$checkAll(e,t);return t}$reset(){for(const e in this._internal.cacheProp){const t=this._internal.cacheProp[e];void 0!==t&&t.$reset()}this.$dirty=!1,this.$parent||(this._internal.options.startDirty=!1,this._internal.options._userInput=!1)}$dirtyList(e){if(void 0===e&&(e=[]),this.$schema.disabled)return e;for(const t in this._internal.cacheProp){const n=this._internal.cacheProp[t];n&&n.$dirtyList(e)}return e}$fixDateFormat(){return kn(this._internal.schema,this.$model)}$fixFormat(){return kn(this._internal.schema,this.$model)}$traverseFirst(e,t){if(t){if(e(this))return this;for(const n in this._internal.schemaprops){const i=this[n];if(i){const n=i.$traverseFirst(e,!!t);if(n)return n}}}else{if(this.$schema.disabled)return;if(e(this))return this;for(const n in this._internal.cacheProp){const i=this._internal.cacheProp[n].$traverseFirst(e,!!t);if(i)return i}}}get $fields(){if(this._options.wrapAll)return this._internal.cacheProp;const e={},t=this;for(const n in this._internal.schema.properties)this._internal.cacheProp[n]?e[n]=this._internal.cacheProp[n]:Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>t[n]});return e}$destroy(){!function(e,t,n,i){for(const n in t.schemaprops){const r=t.cacheProp[n];r&&(r.$destroy(),delete t.cacheProp[n],i&&delete e[n])}}(this,this._internal,this._options,!Object.isSealed(this)),super.$destroy()}$addProp(e,t){const n=this._internal.cacheProp[e];return n&&(n.$destroy(),delete this._internal.cacheProp[e],delete this[e]),this._internal.schemaprops[e]=t,Si(e,this,this._internal,this._options),this[e]}beforePathChange(){super.beforePathChange();for(const e in this._internal.cacheProp){const t=this._internal.cacheProp[e];t&&t.beforePathChange()}}afterPathChange(){for(const e in this._internal.cacheProp){const t=this._internal.cacheProp[e];t&&t.afterPathChange()}super.afterPathChange()}};class Oi extends xi{constructor(e){super(e),Hn(this,this._internal,"number",["minimum","maximum","exclusiveMaximum","exclusiveMinimum","precision"]),this.$schema.warnings&&Xn(this,this._internal,"number",["minimum","maximum","exclusiveMaximum","exclusiveMinimum"]),this._internal.typeok=!0}$validate(e,t){if(this.$disabled)return null;if(void 0===e&&(e=this.$model),t||(this.$dirty=!0),null===e){if(!this._internal.typeok){const t=En(this._internal,"type",e,this.$schema);return this.$validateResult={validation:"type",message:t,expected:this._internal.schema.type,stringValue:this.$stringValue},t}if(this.$schema.fieldRequired){const t=En(this._internal,"required",e,this.$schema);return this.$validateResult={validation:"required",message:t,expected:!0},t}return null}if(this.$schema.enum&&-1===this.$schema.enum.indexOf(e)){const t=En(this._internal,"enum",e,this.$schema);return this.$validateResult={validation:"enum",message:t,expected:this.$schema.enum},t}const n=+e;return super.$validate(n)}$check(e,t,n){if(this.$schema.warnings&&!this.$disabled){if(this.$checkResult=[],void 0===e&&(e=this.$model),t||(this.$dirty=!0),n=n||[],null===e){if(this.$schema.warnings.fieldRequired){const t=Tn(this._internal,"required",e,this.$schema);this.$checkResult.push({validation:"required",message:t,expected:!0}),n.push(t)}if(this.$schema.warnings.enum&&-1===this.$schema.warnings.enum.indexOf(e)){const t=Tn(this._internal,"enum",e,this.$schema);this.$checkResult.push({validation:"enum",message:t,expected:this.$schema.warnings.enum}),n.push(t)}return n}const i=+e;return super.$check(i,t,n)}return this.$checkResult=[]}get $stringValue(){return this.$getUserData("$stringValue",null)}getValue(e){var t,n;void 0===e&&(e=this.$model);const i=null!==(n=null===(t=this._options._lang)||void 0===t?void 0:t.value)&&void 0!==n?n:ne.current,r=this.$getUserData("$stringValue",null);if(this._options.lazyNumbers&&this.$hasFocus&&null!=this.lazyValue)return this.lazyValue;if(null===e)return null!==r?r:"";isNaN(+e)&&(e=0);let a="";switch(this.$schema.type){case"number":a=void 0===this.$schema.precision?be(e,8,i):be(e,this.$schema.precision,i);break;case"money":a=void 0===this.$schema.precision?we(e,!1,2,i):we(e,!1,this.$schema.precision,i);break;case"integer":a=be(e,0,i)}return a}setValue(e){var t,n,i,r,a,s,o,l;if(this.$disabled)return;const c=null!==(n=null===(t=this._options._lang)||void 0===t?void 0:t.value)&&void 0!==n?n:ne.current;this._internal.typeok=!0;let u=null;if(this._options.dirtyOnInput&&(this.$dirty=!0),this._options._userInput=!0,this._options.lazyNumbers&&this.$hasFocus&&(this.lazyValue=e),""===e||null==e?u=null:(u=+e.replace(/\s/g,"").replace(c.decimalSeparator,"."),u>Number.MAX_SAFE_INTEGER&&(u=Number.POSITIVE_INFINITY),u<Number.MIN_SAFE_INTEGER&&(u=Number.NEGATIVE_INFINITY),!isNaN(u)&&isFinite(u)||(this._internal.typeok=!1,u=null)),this._internal.typeok)if(null===(r=this._options._anyEvent)||void 0===r?void 0:r.invalidValue){const e=this.$stringValue;this.$setUserData("$stringValue",null),null!==e&&ri({type:"invalidValue",target:this,value:null,prevValue:e})}else this.$setUserData("$stringValue",null);else if(null===(i=this._options._anyEvent)||void 0===i?void 0:i.invalidValue){const t=this.$stringValue;this.$setUserData("$stringValue",e),t!==e&&ri({type:"invalidValue",target:this,value:e,prevValue:t})}else this.$setUserData("$stringValue",e);let h=0,d=!1;if(null===u&&(null===(a=this._options._anyEvent)||void 0===a?void 0:a.beforeChange)){const e={type:"beforeChange",target:this,value:u,prevValue:this.$model};ri(e)&&(d=!0,u=e.value)}if(null===u)if(null===(s=this._options._anyEvent)||void 0===s?void 0:s.change){const e=this.$model;this.$model=null,null!==e&&ri({type:"change",target:this,value:null,prevValue:e})}else this.$model=null;else{switch(this.$schema.type){case"integer":h=ve(u,0);break;case"money":h=void 0===this.$schema.precision?ve(u,2):ve(u,this.$schema.precision);break;case"number":h=void 0===this.$schema.precision?ve(u,8):ve(u,this.$schema.precision)}if(!d&&(null===(o=this._options._anyEvent)||void 0===o?void 0:o.beforeChange)){const e=this.$model;if(h!=e){const t={type:"beforeChange",target:this,value:h,prevValue:e};ri(t)&&(h=t.value)}}if(null===(l=this._options._anyEvent)||void 0===l?void 0:l.change){const e=this.$model;this.$model=h,h!=e&&ri({type:"change",target:this,value:h,prevValue:e})}else this.$model=h}}get $hasFocus(){return super.$hasFocus}set $hasFocus(e){if(e){if(this._options.lazyNumbers){const e=this.getValue();this.lazyValue=e}super.$hasFocus=!0}else this._options.lazyNumbers?(this.lazyValue=void 0,super.$hasFocus=!1):super.$hasFocus=!1}$getInvalidValues(e=[]){if(!this._internal.typeok){const t=this.$getUserData("$stringValue");t&&e.push({$path:this.$path,$value:t})}return e}}$i.integer=Oi,$i.number=Oi,$i.money=Oi;$i.string=class extends xi{constructor(e){if(super(e),Hn(this,this._internal,"number",["maxLength","minLength","minimum","maximum","exclusiveMaximum","exclusiveMinimum"]),e.schema.pattern)if("string"==typeof e.schema.pattern){const t=e.options.schemaMethods.patterns[e.schema.pattern];if(t)this.$schema.pattern=t;else try{this.$schema.pattern=new RegExp(e.schema.pattern,null===e.schema.patternFlags?"":e.schema.patternFlags||"i")}catch(t){ai(this,0,0,e.schema.pattern)}}else Wt(e.schema.pattern)||Array.isArray(e.schema.pattern)?Jn(this,"pattern",this._internal):e.schema.pattern instanceof RegExp&&(this.$schema.pattern=e.schema.pattern);this.$schema.warnings&&Xn(this,this._internal,"number",["maxLength","minLength","minimum","maximum","exclusiveMaximum","exclusiveMinimum"])}get $format(){return this.$schema.format||this.$schema.warnings&&this.$schema.warnings.format||""}$validate(e,t){if(this.$disabled)return null;if(void 0===e&&(e=this.$model),t||(this.$dirty=!0),""===e||null===e){if(this.$schema.fieldRequired){const t=En(this._internal,"required",e,this.$schema);return this.$validateResult={validation:"required",message:t,expected:!0},t}if(this.$schema.enum&&-1===this.$schema.enum.indexOf(e)){const t=En(this._internal,"enum",e,this.$schema);return this.$validateResult={validation:"enum",message:t,expected:this.$schema.enum},t}return null}return super.$validate(e)}$check(e,t,n){if(this.$schema.warnings&&!this.$disabled){void 0===e&&(e=this.$model),t||(this.$dirty=!0),n=n||[],this.$checkResult=[];const i=this.$schema.warnings.fieldRequired;if(""===e||null===e){if(i){const t=Tn(this._internal,"required",e,this.$schema);this.$checkResult.push({validation:"required",message:t,expected:!0}),n.push(t)}if(this.$schema.warnings.enum&&-1===this.$schema.warnings.enum.indexOf(e)){const t=Tn(this._internal,"enum",e,this.$schema);this.$checkResult.push({validation:"enum",message:t,expected:this.$schema.warnings.enum}),n.push(t)}return n}return super.$check(e,t,n)}return this.$checkResult=[]}$fixDateFormat(){switch(this.$format){case"date":return _n(this._internal.parent,this.$key)?1:0;case"date-time":return wn(this._internal.parent,this.$key)?1:0}return 0}getValue(e){var t,n,i,r;if(void 0===e&&(e=this.$model),null!==e)switch(this.$format){case"date":if(e&&e.length>=10){e=(null!==(n=null===(t=this._options._lang)||void 0===t?void 0:t.value)&&void 0!==n?n:ne.current).shortDateFormatter(e)}break;case"date-time":if(e&&e.length>=10){const t=null!==(r=null===(i=this._options._lang)||void 0===i?void 0:i.value)&&void 0!==r?r:ne.current;if(this._options.utc){const t=-1==e.indexOf("Z")?new Date(e+"Z"):new Date(e);e=re(t)}let n=t.shortDateFormatter(e);if(19===e.length){n+=" "+e.substring(11,19)}e=n}}return e||""}setValue(e){var t,n,i,r,a,s;if(!this.$disabled){if(this._options._userInput=!0,null!==e&&(!0===e?e="true":!1===e&&(e=""),e))switch(this.$format){case"uppercase":e=e.toLocaleUpperCase();break;case"lowercase":e=e.toLocaleLowerCase();break;case"capitalize":e=ge(e);break;case"date":if(e.length>=8){const i=(null!==(n=null===(t=this._options._lang)||void 0===t?void 0:t.value)&&void 0!==n?n:ne.current).shortDateReformatter(e);i&&(e=i)}break;case"date-time":if(e.length>=8){let t=(null!==(r=null===(i=this._options._lang)||void 0===i?void 0:i.value)&&void 0!==r?r:ne.current).shortDateReformatter(e);const n=e.indexOf(" ");if(n>-1){const i=e.substring(n).trim();i&&(t+=" "+i)}if(t){if(this._options.utc){t=function(e){return e.getUTCFullYear()+"-"+ie(e.getUTCMonth()+1)+"-"+ie(e.getUTCDate())+"T"+ie(e.getUTCHours())+":"+ie(e.getUTCMinutes())+":"+ie(e.getUTCSeconds())+"Z"}(new Date(t))}e=t}}}if(null===(a=this._options._anyEvent)||void 0===a?void 0:a.beforeChange){const t={type:"beforeChange",target:this,value:e,prevValue:this.$model};ri(t)&&t.value!==e&&(e=t.value)}if(null===(s=this._options._anyEvent)||void 0===s?void 0:s.change){const t=this.$model;this.$model=e,e!=t&&ri({type:"change",target:this,value:e,prevValue:t})}else this.$model=e;!this.$dirty&&this._options.dirtyOnInput&&(this.$dirty=!0)}}};function zi(e,t=100,n=0){if(void 0===e)return!0;if(Array.isArray(e)){if((n+=e.length)>t)return!1;for(const i of e)if(!zi(i,t,n))return!1}else if("object"==typeof e&&e){for(const i in e)if(!zi(e[i],t,n))return!1}else if(++n>t)return!1;return!0}function Ci(e,t=null,n={}){return!(e=h(e)).type&&e.properties&&(e.type="object"),Pi(e,t,Object.assign(Object.assign({},n),{skipFix:!0}))}function Ri(e,t=null,n={}){return Ci(St(e,n.defaultsFromInstance),t,n)}function Pi(e,t=null,i={}){var r,c;const u=i.onAfterSchema,$=i.onBeforeFixSchema,g=i.onBeforeWrap,y=i.vm;delete i.arrayItemGuidField,delete i.onAfterSchema,delete i.onBeforeFixSchema,delete i.onBeforeWrap,delete i.vm;let v=!0;const b=y?y._.appContext.app:null;let _;if(e=h(e),i.skipFix)_=d(e)?he(e):e;else{const n=Object.assign({},pt);void 0!==i.arrayItemGuidField?n.arrayItemGuidField=i.arrayItemGuidField:e.$options&&void 0!==e.$options.arrayItemGuidField&&(n.arrayItemGuidField=e.$options.arrayItemGuidField),n.model=t,$&&$.call(y,e,n),_=Array.isArray(e)?gt(e,n):void 0===e.$parent?gt([e],n):e}const w=function(){const e={};return bt(e,vt),e}();let x=null;if(_.$options&&(_.$options.$methods&&(x=Object.assign(x||{},_.$options.$methods)),bt(w,_.$options)),_.$methods&&(x=Object.assign(x||{},_.$methods)),i.schemaMethods&&(x=Object.assign(x||{},i.schemaMethods)),bt(w,i),w._disabledFields=void 0,w._forceRecalc=w.forceCalcEnabled?l(0):void 0,w._anyEvent=void 0,w._readedErrorFields=void 0,x){let e=!1;for(const t in x)if(Object.prototype.hasOwnProperty.call(x,t)){const n=x[t];if(n instanceof Function)x[t]=y?function(){return n.apply(y||this,arguments)}:n;else if("object"==typeof n&&t.toLocaleLowerCase().endsWith("service"))x[t]=n;else{let e=n,i="$0,$1,$2,$3,$4,$5,$6,$7,$8,$9";const r=n.props||n.args,a=n.body||n.text;r&&(i=r||""),a&&(e=a),Array.isArray(e)&&(e=e.join("\n")),x[t]="string"==typeof e?new Function(i,e):n}e=!0}e&&(w.schemaMethods=Object.assign({},vt.schemaMethods,x),v=!1)}let k=w.lang;const F=p();let M,D=w.i18n;if(D||!D&&F&&F.appContext&&(D=null===(c=null===(r=F.appContext.config)||void 0===r?void 0:r.globalProperties)||void 0===c?void 0:c.$i18next),D){const e=D.t,t=D.language;v?(w.schemaMethods=Object.assign({},w.schemaMethods,{translate:e}),v=!1):w.schemaMethods.translate=e,M=t=>{if(w._i18n&&(w._i18n.value={t:e,language:t,instance:D}),!w.lang){if(S)return S.$changeLanguage(t,!0);if(w._lang)return w._lang.value=te(t),!0}return!1},D.on("languageChanged",M),w._i18n=n({t:e,language:t,instance:D}),k||(k=t)}if(w._lang=n(k?te(k):w.schemaMethods.lang),v&&(w.schemaMethods=Object.assign({},w.schemaMethods),v=!1),w._lang&&Object.defineProperty(w.schemaMethods,"lang",{enumerable:!0,get(){var e;return null===(e=w._lang)||void 0===e?void 0:e.value}}),b&&(b.config.globalProperties.$methods=w.schemaMethods),y&&(y.$methods=w.schemaMethods),null==t)t=w.fixData?fn(_,!0,void 0,w):{};else if(i.gdprMode&&(t=Dn(_,t,i.gdprMode)),w.fixData&&!w.fixTypes&&bn(_,t,!0,w),w.fixTypes){const e={};mn(_,e,t,null,0,!0,w),t=e,w.fixData&&bn(_,t,!0,w)}else w.fixFormat&&(kn(_,t),mn(_,t,t,null,0,!0,w));void 0===w.wrapAll&&(w.wrapAll=zi(t,100)),a(t)||(t=o(t)),i.external&&(a(i.external)||(i.external=s(i.external))),g&&g.call(y,t,_,w),w._disabledFields=new Set,w._anyEvent={};const S=new $i.object({dest:null,parent:{model:t},prevModel:i.prevModel?i.prevModel:void 0,propName:"model",schema:_,options:w});u&&u.call(y,S),S._internal.onDestroy=()=>{M&&D&&D.off("languageChanged",M)};try{F&&(F.appContext.app.config.globalProperties.$methods||(F.appContext.app.config.globalProperties.$methods=vt.schemaMethods),f((()=>{try{const e=p();e&&e.ctx&&!e.ctx.$schema&&(e.ctx.$schema=S)}catch(e){}})),m((()=>{try{const e=p();if(e&&e.ctx&&e.ctx.$schema){e.ctx.$schema.$destroy(),delete e.ctx.$schema,delete e.ctx.schema}}catch(e){}})))}catch(e){}return S}$i.boolean=class extends xi{constructor(e){super(e)}$validate(e,t){if(this.$disabled)return null;if(void 0===e&&(e=this.$model),t||(this.$dirty=!0),null===e){if(this.$schema.fieldRequired){const t=En(this._internal,"required",e,this.$schema);return this.$validateResult={validation:"required",message:t,expected:!0},t}if(this.$schema.enum&&-1===this.$schema.enum.indexOf(e)){const t=En(this._internal,"enum",e,this.$schema);return this.$validateResult={validation:"enum",message:t,expected:this.$schema.enum},t}return null}const n=!!e;if(this.$schema.fieldRequired&&!n){const t=En(this._internal,"required",e,this.$schema);return this.$validateResult={validation:"required",message:t,expected:!0},t}return super.$validate(n)}$check(e,t,n){if(this.$schema.warnings&&!this.$disabled){if(this.$checkResult=[],void 0===e&&(e=this.$model),t||(this.$dirty=!0),n=n||[],null===e){if(this.$schema.warnings.fieldRequired){const t=Tn(this._internal,"required",e,this.$schema);this.$checkResult.push({validation:"required",message:t,expected:!0}),n.push(t)}if(this.$schema.warnings.enum&&-1===this.$schema.warnings.enum.indexOf(e)){const t=Tn(this._internal,"enum",e,this.$schema);this.$checkResult.push({validation:"enum",message:t,expected:this.$schema.warnings.enum}),n.push(t)}return n}const i=!!e;if(this.$schema.fieldRequired&&!i){const t=Tn(this._internal,"required",e,this.$schema);this.$checkResult.push({validation:"required",message:t,expected:!0}),n.push(t)}return super.$check(i,t,n)}return this.$checkResult=[]}getValue(e){return void 0===e&&(e=this.$model),e?"true":""}setValue(e){var t,n;if(!this.$disabled){if(this._options._userInput=!0,this.$disabled||this.$dirty||!this._internal.options.dirtyOnInput||(this.$dirty=!0),e=null===e||"null"===e?null:!1!==e&&"false"!==e&&"off"!==e&&""!==e,null===(t=this._options._anyEvent)||void 0===t?void 0:t.beforeChange){const t=this.$model;if(e!==t){const n={type:"beforeChange",target:this,value:e,prevValue:t};ri(n)&&n.value!==e&&(e=n.value)}}if(null===(n=this._options._anyEvent)||void 0===n?void 0:n.change){const t=this.$model;this.$model=e,e!=t&&ri({type:"change",target:this,value:e,prevValue:t})}else this.$model=e}}};const ji={created(){const e=this,t=e.$options.schema;t&&e.$setSchema&&e.$setSchema(t,!1)},methods:{$setSchema(e,t){const n=this;if(n.$schema&&n.$schema.$destroy(),n.$schema=n.schema=void 0,!e)return;if(void 0===n.model)throw new Error("no `model` property in data");const i={};i.vm=n,n.$options.external&&(i.external=n.$external=n.$options.external),n.$form=i.form=n.form||{};const r=n.schemaOptions||n.$options.schemaOptions;let a;r&&void 0!==r.arrayItemGuidField&&(i.arrayItemGuidField=r.arrayItemGuidField),n.$options.beforeFixSchema&&(i.onBeforeFixSchema=n.$options.beforeFixSchema),n.$options.afterSchema&&(i.onAfterSchema=n.$options.afterSchema),n.$options.beforeSchema&&(i.onBeforeWrap=n.$options.beforeSchema),r&&(r.$methods&&(a=Object.assign(a||{},r.$methods),r.$methods=void 0),bt(i,r)),n.$options.$methods&&(a=Object.assign(a||{},n.$options.$methods)),a&&(i.schemaMethods=a);const s=Pi(e,n.model,i);return n.model=s.$model,n.$schema=n.schema=s,t&&n.$forceUpdate&&n.$forceUpdate(),s}}},Ii={created(){},beforeMount(e,t){const n=t.value;n&&n.$bind&&n.$bind(e,t.modifiers)},mounted(){},beforeUpdate(e,t){t.oldValue!==t.value&&(t.oldValue&&t.oldValue.$unbind&&t.oldValue.$unbind(e),t.value&&t.value.$bind&&t.value.$bind(e,t.modifiers))},updated(){},beforeUnmount(e,t){const n=t.value;n&&n.$unbind&&n.$unbind(e)},unmounted(){}};function Li(t,n=25){const i=l(n),r=l(0),a=e((()=>Math.ceil(t.$model.length/i.value))),s=l(""),o=e({get:()=>0==a.value?0:r.value>=a.value?a.value-1:r.value,set:e=>{e<=0?r.value=0:e>=a.value?r.value=a.value-1:r.value=e}});function c(e){o.value=Math.floor(e/i.value)}const u=e((()=>t.$getItems(o.value*i.value,i.value,s.value)));return{gotoItem:c,addRow:function(e){let n;return n=e?t.$addRow(e):t.$addRow(),o.value=a.value-1,n},removeRow:function(e){t.$removeRow(e)},moveUp:function(e){if(t.$exchangeRow(e,e-1))return c(e-1),!0},moveDown:function(e){if(t.$exchangeRow(e,e+1))return c(e+1),!0},pageSize:i,pageNumber:o,pageCount:a,items:u,order:s}}function Ai(e,t,n="model"){var i;e.__vnode&&(e=e.__vnode),e._&&(e=e._),e.component&&(e=e.component),(null===(i=e.subTree)||void 0===i?void 0:i.component)&&(e=e.subTree.component);const r=e.subTree?e.subTree.children:e.children;if(r&&"string"!=typeof r){for(let e=0;e<r.length;e++){const i=r[e],a=i.props?i.props[n]:null;if(a&&ii(a)&&!1===t(a,i))return!1;if(!1===Ai(i,t,n))return!1}return!0}}function Ni(e,t,n="model"){const i=new Set;Ai(e,((e,n)=>{if(!i.has(e))return i.add(e),t(e,n)}),n)}function Ei(e,t="model"){const n=new Set;return Ai(e,(e=>{n.add(e)}),t),n}function Ti(e,t="model"){const n=[];return Ni(e,(e=>{const t=e.$validate();t&&n.push(t)}),t),n}function Ki(e){return e}Array.prototype.includes||(Array.prototype.includes=function(e){const t=Object(this),n=parseInt(t.length,10)||0;if(0===n)return!1;const i=parseInt(arguments[1],10)||0;let r,a;for(i>=0?r=i:(r=n+i,r<0&&(r=0));r<n;){if(a=t[r],e===a||e!=e&&a!=a)return!0;r++}return!1}),Object.keys||(Object.keys=function(){const e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("function"!=typeof r&&("object"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");const a=[];let s,o;for(s in r)e.call(r,s)&&a.push(s);if(t)for(o=0;o<i;o++)e.call(r,n[o])&&a.push(n[o]);return a}}()),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let e=1;e<arguments.length;e++){const n=arguments[e];if(null!=n)for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t}),Array.test||(Array.test=function(){return"test"});const Vi=Array.prototype.includes,Wi=Object.keys,Gi=Array.test;var Ui=Object.freeze({__proto__:null,includes:Vi,keys:Wi,test:Gi});export{Kt as $methods,wt as BaseSchemaClass,Tt as JProp,mi as JSchema,Lt as SchemaAggregate,At as SchemaClass,jt as SchemaFormat,It as SchemaGuid,Ct as SchemaInteger,zt as SchemaMoney,Nt as SchemaOptions,Pt as SchemaRequired,Rt as SchemaString,Et as SchemaValidation,$i as WrappedPropertyCtor,Je as bigRomanValue,ge as capitalize,V as checkFormat,St as classToSchema,ln as clearData,Zt as compileFunctions,te as createLang,b as createPasswordPattern,se as dateAdd,le as dateDiff,Ce as dateFromPesel,pe as dateHoliday,ce as datePart,he as deepCopy,mi as default,ne as defaultLang,vt as defaultOptions,Ki as defineMethods,Xt as defineSchema,nn as defineSchemaSimple,gt as fixAndMergeSchema,bn as fixData,kn as fixFormat,mt as fixMinifiedSchema,en as fixSchema,an as fixSchemaSimple,Mn as flatPropsList,we as fmoney,xe as fmoneySpace,Dn as gdprData,fe as generateGuid,$e as generateShortGuid,Ei as getWrappedProperties,Re as includesAll,Wt as isFunction,Gt as isObject,ii as isWrappedProperty,Oe as listMonths,ze as listYears,bt as mergeOptions,Yt as mergeSchema,$t as minifySchema,ve as mround,Ie as nullDefault,ie as padNumber,y as patterns,Pe as percent,Ui as polyfills,Jt as predefineSchema,tn as predefineSchemaSimple,Qt as prefixSchema,rn as prefixSchemaSimple,Ii as schemaDirective,ht as schemaMethods,ji as schemaMixin,on as schemaToJsText,mn as setData,Xe as smallRomanValue,ut as syncArray,Ue as toWords,Qe as toWordsMoney,Le as today,Ai as traverseWrappedProperties,Ni as traverseWrappedPropertiesDistinct,Li as usePagination,fi as validate,Ti as validateTree,Pi as wrapSchema,Ri as wrapSchemaClass,Ci as wrapSchemaSimple};
